<!doctype html> <html lang=en-US> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>Feather Wiki</title> <meta name="description" content="A lightweight personal wiki"> <meta name=application-name content="Feather Wiki"> <meta name=version content=1.8.1> <style id=s>:root{--primary:#8b0000;--primary-hover:#a50000;--primary-light:#2a0000;--secondary:#4a0e0e;--success:#1a4d1a;--danger:#b22222;--warning:#ff4500;--bg:#0a0a0a;--surface:#1a1a1a;--sidebar-bg:#111111;--text:#d4d4d4;--text-light:#999999;--text-lighter:#666666;--border:#2a2a2a;--border-hover:#3a3a3a;--shadow:0 4px 8px rgba(139,0,0,.3),0 2px 4px rgba(0,0,0,.8);--shadow-md:0 8px 16px rgba(139,0,0,.4),0 4px 8px rgba(0,0,0,.9);--shadow-lg:0 12px 24px rgba(139,0,0,.5),0 8px 16px rgba(0,0,0,.95);--radius:4px;--radius-sm:2px;--radius-lg:8px;--transition:all .3s ease;--blood:#8b0000;--fog:rgba(200,200,200,.05)}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}html,button,input,select,option,textarea{font-size:15px;background:var(--bg);color:var(--text)}html,body{margin:0;padding:0}:focus{outline:2px solid var(--primary);outline-offset:2px}*{box-sizing:border-box;position:relative;max-width:100vw}*+*,p,li>ul,li>ol,.ed-uc>*:not(:first-child){margin:.75rem 0}main>*{padding:2rem 2.5rem}#g:not([open]),.sb .n{display:none}input,select,textarea{padding:.625rem .875rem;tab-size:4;background:var(--surface);border:1px solid var(--border);transition:var(--transition);border-radius:var(--radius-sm)}input:hover,select:hover,textarea:hover{border-color:var(--border-hover)}input:focus,select:focus,textarea:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-light)}h1,h2,h3,h4,h5,h6,.t{font-weight:700;margin:1.5rem 0 .875rem 0;color:var(--text);letter-spacing:-.015em}h1{font-size:2.25rem;line-height:1.2}h2{font-size:1.875rem;line-height:1.3}h3,.t{font-size:1.5rem;line-height:1.4}h4{font-size:1.25rem}h5{font-size:1.125rem}h6{font-size:1rem}.np{max-width:10rem}button,summary:is(.np,.b){text-align:center;color:#fff;padding:.625rem 1.25rem;background:linear-gradient(135deg,var(--primary),var(--primary-hover));border:0;border-radius:var(--radius);font-weight:600;transition:var(--transition);cursor:pointer;box-shadow:var(--shadow)}button:hover,summary:is(.np,.b):hover{transform:translateY(-1px);box-shadow:var(--shadow-md);background:linear-gradient(135deg,var(--primary-hover),var(--primary))}button:active{transform:translateY(0)}a,summary,.noti{cursor:pointer}a{text-decoration:none;color:var(--primary);transition:var(--transition);font-weight:500}a:hover{color:var(--primary-hover);text-decoration:underline}a:visited{opacity:.9}a.e{color:var(--danger);font-weight:600}a.l{visibility:hidden;color:var(--text-lighter);font-weight:400;text-decoration:none;margin-left:.5rem}:is(h1,h2,h3,h4,h5,h6):hover a.l,a.l:is(:focus,:active){visibility:visible}a:is([target=_blank],.e):after{font-size:70%;vertical-align:top;margin-left:3px}a[target=_blank]:after{content:"\29c9"}a.e:after{content:"!"}nav ul{list-style:none;padding-left:0}ul,ol{padding:0 0 0 1.5rem}nav li summary{text-indent:-1rem}label{display:block;font-weight:600;margin-bottom:.5rem;color:var(--text);font-size:.9375rem}blockquote{margin:1.5rem 0;padding:1rem 1.5rem;border-left:4px solid var(--primary);background:var(--primary-light);border-radius:0 var(--radius) var(--radius) 0;font-style:italic}.uc pre{font-size:85%;padding:1.25rem;border-radius:var(--radius);background:#1e293b;color:#e2e8f0;line-height:1.6;overflow-x:auto;box-shadow:var(--shadow)}abbr[title]{cursor:help;text-decoration:underline dotted;text-decoration-color:var(--text-lighter)}.sb{background:var(--sidebar-bg);border-right:1px solid var(--border);padding:1.5rem}.w1,.w34,.w12,.w14,.r,main{width:100%}.tabs>*{border:2px solid var(--border);border-bottom:0;border-radius:var(--radius) var(--radius) 0 0;margin:0;background:var(--surface);font-weight:600;transition:var(--transition);padding:.625rem 1rem}.tabs>*:hover{background:var(--primary-light)}.a{background:var(--primary)!important;color:#fff!important;position:relative}.a:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#fff}@media (min-width:50rem){.r,main{display:table;border-spacing:1.5rem 0}.r.ns,main{border-spacing:0}.c,main>*{display:table-cell!important;vertical-align:top}.sb{width:20%;min-width:240px;max-width:500px;height:100vh;overflow-y:auto}.sb .n{display:unset}.sbt{display:none}.w34{width:75%}.w12{width:50%}.w13{width:33%}.w14{width:25%}body>footer{position:absolute;inset:auto 2rem 0}form,.mw,#g,input,select,textarea,.ed{max-width:1000px}.tr{text-align:right}.fr{float:right}}.sr{visibility:hidden;height:0;width:0;position:absolute}.tr:not(.ml){text-align:right}.fr:not(.ml){float:right}.chg,.del{background:var(--danger);color:#fff}.del{opacity:.9}.h,.del{font-size:.875rem}.db{display:block}.il{display:inline}.ib{display:inline-block}.at{vertical-align:top}.pb{margin:0 0 1.5rem!important}.uc a{text-decoration:underline}.notis{position:fixed;top:1rem;right:1rem;left:auto;max-width:400px;z-index:9999}.noti{padding:1rem 1.25rem;box-shadow:var(--shadow-lg);background:var(--surface);border-left:4px solid var(--primary);border-radius:var(--radius);margin-bottom:.75rem;animation:slideIn .3s ease}@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}#g,input,select,textarea,.ed,.noti{border:1px solid var(--border);border-radius:var(--radius)}.ed *{margin:unset}.ed-uc,textarea,#g,.g{width:100%;overflow-y:auto;padding:1rem;margin:0 auto;background:var(--surface)}.ed-uc,textarea{height:50vh;min-height:300px;max-height:600px;font-family:'Monaco','Courier New',monospace;font-size:.9375rem}.ed-uc nowiki{background:var(--primary-light);padding:.25rem .5rem;border-radius:var(--radius-sm)}:is(.ed-uc,textarea,.uc) *{max-width:100%}.ed-bar{border-bottom:1px solid var(--border);padding:.75rem;background:var(--bg)}.ed-btn{background:transparent;color:var(--text);vertical-align:middle;border:1px solid var(--border);margin-right:.375rem;padding:.5rem .75rem;border-radius:var(--radius-sm);transition:var(--transition)}.ed-btn:hover{background:var(--primary-light);color:var(--primary)}.ed-sel{background:var(--primary-light);color:var(--primary);border-color:var(--primary)}article.uc{background:var(--surface);padding:2rem;border-radius:var(--radius-lg);box-shadow:var(--shadow);margin:1rem 0}main>section>header{background:var(--surface);padding:1.5rem 2rem;border-radius:var(--radius-lg);box-shadow:var(--shadow);margin-bottom:2rem}main>section>header h1{margin:.5rem 0}code{background:var(--primary-light);padding:.25rem .5rem;border-radius:var(--radius-sm);font-size:.875em;color:var(--text);font-family:'Monaco','Courier New',monospace}.sb a{display:block;padding:.5rem .75rem;border-radius:var(--radius-sm);margin:.25rem 0;transition:var(--transition);color:var(--text)}.sb a:hover{background:var(--primary-light);text-decoration:none;color:var(--primary)}.sb a.a{background:var(--primary);color:#fff}.sb .t{font-size:1.5rem;font-weight:700;color:var(--primary);padding:.5rem 0;margin-bottom:1rem;display:block}.sb .t:hover{color:var(--primary-hover);background:transparent}footer{padding:1.5rem 2rem;color:var(--text-light);font-size:.875rem;border-top:1px solid var(--border);background:var(--surface)}</style>  <script id=p type=application/json>{"A":"Survival Horror Wiki","B":"A comprehensive guide to survival horror video games from 1986 to present","J":[{"C":"welcome","A":"Welcome","D":1731974000000,"E":"# Welcome to the Survival Horror Wiki\n\n**Enter if you dare...**\n\nThis wiki documents the dark history of survival horror video games, from their origins in the mid-1980s to the terrifying experiences of today.\n\n## What is Survival Horror?\n\nSurvival horror is a subgenre of action-adventure and horror video games that focuses on survival of the character as the game tries to frighten players with either horror graphics or scary ambience. Although combat can be part of the gameplay, the player is made to feel less in control than in typical action games through various means:\n\n- **Limited resources** (ammunition, health items)\n- **Vulnerable protagonist** (not a supersoldier)\n- **Atmospheric dread** and psychological horror\n- **Puzzle-solving** under pressure\n- **Exploration** of haunted locations\n\n## Explore the Archives\n\nBrowse through decades of terror in the sidebar. Each entry covers:\n\n- Game history and development\n- Gameplay mechanics\n- Cultural impact\n- Legacy and influence\n\n*The night is dark and full of terrors... Let's explore them together.*","F":"md","G":null,"H":"introduction,guide","I":"welcome"},{"C":"sweet-home","A":"Sweet Home (1989)","I":"sweet-home","D":1731974001000,"E":"# Sweet Home (1989)\n\n## Overview\n\n**Developer:** Capcom  \n**Platform:** Famicom (NES)  \n**Release:** December 15, 1989 (Japan only)\n\n**Sweet Home** is widely considered the first true survival horror game and served as the spiritual predecessor to Resident Evil. Based on the Japanese horror film of the same name, it pioneered many mechanics that would become staples of the genre.\n\n## Gameplay\n\nSweet Home featured revolutionary mechanics for its time:\n\n- **Limited inventory** forcing resource management\n- **Multiple characters** with unique abilities\n- **Permanent death** - if a character dies, they're gone forever\n- **Puzzle-solving** requiring specific character skills\n- **Random encounters** with monsters\n- **Atmospheric horror** despite 8-bit graphics\n\n## Story\n\nA documentary film crew of five people enters the abandoned mansion of the famous artist Ichiro Mamiya to photograph his frescoes. The mansion becomes supernaturally sealed, and the team must uncover its dark history while battling vengeful spirits.\n\n## Legacy\n\nSweet Home's influence on survival horror cannot be overstated:\n\n- Direct inspiration for **Resident Evil** (1996)\n- Established the \"haunted mansion\" trope\n- Pioneered tension through limited resources\n- Created the template for survival horror gameplay\n\nDirector Tokuro Fujiwara would later create the Resident Evil series, bringing many of Sweet Home's concepts to 3D gaming.\n\n## Cultural Impact\n\nWhile never released outside Japan, Sweet Home remains legendary among horror game enthusiasts. Fan translations have kept the game alive, and it's frequently cited in discussions of horror game origins.\n\n> \"Sweet Home laid the foundation upon which all modern survival horror was built.\" - Gaming Historian","F":"md","G":null,"H":"1980s,capcom,famicom,classic","I":"sweet_home"},{"C":"alone-in-the-dark","A":"Alone in the Dark (1992)","I":"alone-in-the-dark","D":1731974002000,"E":"# Alone in the Dark (1992)\n\n## Overview\n\n**Developer:** Infogrames  \n**Platforms:** PC, Mac, 3DO, others  \n**Release:** September 1992\n\n**Alone in the Dark** revolutionized horror gaming by bringing the genre into 3D. It established the \"tank controls\" and fixed camera angles that would define survival horror for the next decade.\n\n## Innovation\n\n### 3D Graphics\n- First horror game with **polygon-based 3D characters**\n- Pre-rendered 2D backgrounds for atmosphere\n- Cinematic fixed camera angles\n- Revolutionary for 1992\n\n### Gameplay Mechanics\n- **Tank controls** (turn, then move forward)\n- **Limited ammunition** and health items\n- **Combat avoidance** often better than fighting\n- **Puzzle-heavy** exploration\n- **Item management** with limited inventory\n\n## Story\n\nPrivate investigator Edward Carnby explores the haunted mansion Derceto after the mysterious suicide of its owner. The house is filled with supernatural horrors and dark secrets connected to a pirate captain's cursed treasure.\n\nPlayers can choose between Carnby or Emily Hartwood (the deceased owner's niece), making it an early example of character choice in horror games.\n\n## Lovecraftian Horror\n\nAlone in the Dark heavily drew from **H.P. Lovecraft's** cosmic horror:\n\n- Ancient evils and forbidden knowledge\n- Cthulhu Mythos references\n- Psychological dread\n- Reality-bending horror\n\nThe game's literary references and mature horror themes set it apart from contemporaries.\n\n## Legacy and Influence\n\n**Alone in the Dark** directly inspired:\n\n- **Resident Evil** series (Capcom credited it as primary inspiration)\n- Fixed camera angle design philosophy\n- Tank control scheme (controversial but intentional)\n- 3D survival horror as a genre\n\nThe game spawned multiple sequels, though none matched the original's innovation and influence.\n\n## Technical Achievement\n\nFor 1992, Alone in the Dark was astonishing:\n- Full 3D character models\n- Atmospheric lighting and shadows\n- Detailed pre-rendered backgrounds\n- Cinematic presentation\n\n*It proved horror games could be terrifying in three dimensions.*","F":"md","G":null,"H":"1990s,pc,3d-pioneer,lovecraft","I":"alone_in_the_dark"},{"C":"resident-evil","A":"Resident Evil (1996)","I":"resident-evil","D":1731974003000,"E":"# Resident Evil (1996)\n\n## Overview\n\n**Developer:** Capcom  \n**Platform:** PlayStation  \n**Release:** March 22, 1996 (Japan), March 30, 1996 (NA)\n\n**Resident Evil** (known as *Biohazard* in Japan) didn't just define survival horror—it popularized the entire genre. This masterpiece combined cinematic presentation, terrifying atmosphere, and strategic gameplay to create an unforgettable experience.\n\n## The Mansion Incident\n\n### Story\nMembers of the elite task force S.T.A.R.S. investigate mysterious murders in Raccoon City. After a helicopter crash, they seek shelter in a seemingly abandoned mansion... which proves to be anything but safe.\n\nPlayers choose between:\n- **Jill Valentine** - easier mode, more inventory, has Barry as support\n- **Chris Redfield** - harder mode, less inventory, no defensive items\n\n### Setting\nThe **Spencer Mansion** became iconic:\n- Labyrinthine layout\n- Environmental storytelling\n- Limited save points (ink ribbons)\n- Backtracking with new keys/items\n- Secret passages and hidden rooms\n\n## Gameplay Revolution\n\n### Core Mechanics\n- **Limited ammunition** - every shot counts\n- **Ink ribbons** for saving - save points become strategic decisions\n- **Item boxes** with shared storage across locations\n- **Door animations** - building tension (and hiding loading screens)\n- **Tank controls** with fixed camera angles\n- **Solving puzzles** to progress\n\n### The Terror Formula\n- Scarce resources create constant tension\n- \"Should I fight or run?\" decision-making\n- Atmosphere of isolation and dread\n- **Crimson Head** zombies (in REmake) punish careless killing\n\n## Iconic Moments\n\n### The Dog Jump Scare\nThe hallway with crashing dogs became **one of gaming's most famous scares**. Players felt safe in the quiet corridor—until *that* moment.\n\n### \"Itchy Tasty\" Diary\nThe researcher's diary documenting his transformation remains one of horror gaming's most disturbing documents.\n\n### First Zombie Encounter\nThe head-turn reveal of the first zombie is burned into millions of players' memories.\n\n## Cultural Phenomenon\n\n### Impact\n- **Defined survival horror** conventions\n- Launched one of gaming's biggest franchises\n- Created the template for horror game level design\n- Spawned countless imitators and innovators\n- Made \"survival horror\" a recognized genre\n\n### Remake (2002)\nThe GameCube remake proved remakes could surpass originals:\n- Stunning pre-rendered backgrounds\n- Crimson Head system\n- Expanded story and areas\n- Lisa Trevor subplot\n- Considered one of the **greatest remakes ever made**\n\n## Legacy\n\nResident Evil's influence extends far beyond horror games:\n- Established Capcom's flagship franchise\n- Inspired Silent Hill, Dead Space, and countless others\n- Created the blueprint for \"Metroidvania\" horror\n- Proved mature horror could be commercially successful\n\n> \"The master of unlocking\" - Barry Burton's legendary dialogue\n\n**Resident Evil** didn't just survive—it thrived, becoming a cultural touchstone that continues to terrify and inspire decades later.","F":"md","G":null,"H":"1990s,capcom,playstation,classic,defining","I":"resident_evil"},{"C":"silent-hill","A":"Silent Hill (1999)","I":"silent-hill","D":1731974004000,"E":"# Silent Hill (1999)\n\n## Overview\n\n**Developer:** Konami (Team Silent)  \n**Platform:** PlayStation  \n**Release:** January 31, 1999 (NA)\n\nIf Resident Evil was the king of survival horror, **Silent Hill** was its psychological nightmare counterpart. Rather than zombies and bioweapons, Silent Hill explored psychological horror, with rust, fog, and the darkest corners of the human mind.\n\n## The Fog World\n\n### Story\nHarry Mason searches for his missing daughter Cheryl after a car crash on the outskirts of the mysterious town of Silent Hill. The town appears deserted, wrapped in perpetual fog, and filled with grotesque creatures. Reality itself seems wrong.\n\nAs Harry explores, he discovers Silent Hill's dark history and a cult's terrible ritual.\n\n### Dual Worlds\nSilent Hill introduced the **\"Otherworld\"** concept:\n- **Fog World** - abandoned, decaying, but recognizable\n- **Dark World** - rust, blood, industrial hell—a manifestation of inner darkness\n\nThe shift between worlds created unforgettable horror.\n\n## Psychological Horror\n\n### Atmosphere Over Action\nUnlike Resident Evil's zombie action, Silent Hill focused on:\n- **Psychological dread** and unease\n- **Symbolism** and metaphor\n- **Unreliable reality**\n- **Personal demons** made manifest\n- **Emotional horror** rather than jump scares\n\n### Sound Design\nComposer **Akira Yamaoka** created one of gaming's most disturbing soundscapes:\n- Industrial noise and ambience\n- Distorted radios warning of nearby monsters\n- Unsettling musical themes\n- The sound design became as important as the visuals\n\n## Monster Design\n\nCreatures in Silent Hill weren't just enemies—they were **symbolic manifestations**:\n- **Nurses** - representing hospital trauma\n- **Puppet Doctors** - medical fear and helplessness\n- **Twin Victims** - connected by suffering\n- Each monster reflected psychological concepts\n\nThe designs were deliberately disturbing and abstract.\n\n## Multiple Endings\n\nSilent Hill featured **five different endings** based on player actions:\n- Good Ending\n- Good+ Ending\n- Bad Ending\n- Bad+ Ending  \n- UFO Ending (joke ending)\n\nThis encouraged replay and theory-crafting.\n\n## Technical Innovation\n\n### Working Around Limitations\n- **Heavy fog** created atmosphere while hiding draw distance\n- **Darkness** and limited visibility made horror from technical constraints\n- **Camera work** emphasized vulnerability\n- The limitations became strengths\n\n## Legacy\n\n### Psychological Horror Template\nSilent Hill proved horror games could be:\n- Deeply psychological\n- Symbolic and artistic\n- Emotionally devastating\n- Maturely handled\n\n### Franchise Impact\n- Spawned the legendary Silent Hill 2 (2001)\n- Created a rival to Resident Evil\n- Influenced Alan Wake, The Evil Within, and countless indie horror games\n- Made fog an horror game icon\n\n### Team Silent\nThe original dev team became legendary:\n- SH2 and SH3 refined the formula\n- Post-Team Silent games were controversial\n- Fans still debate which games are \"true\" Silent Hill\n\n## Cultural Status\n\n**Silent Hill** transcended gaming:\n- Film adaptations (mixed results)\n- Academic analysis of its symbolism\n- Influenced horror across media\n- Created a dedicated cult following\n\n> *\"Welcome to Silent Hill... a town you'll never forget.\"*\n\n**Silent Hill** showed that horror games could be art—disturbing, meaningful, unforgettable art that crawls into your mind and never leaves.","F":"md","G":null,"H":"1990s,konami,playstation,psychological,classic","I":"silent_hill"},{"C":"fatal-frame","A":"Fatal Frame (2001)","I":"fatal-frame","D":1731974005000,"E":"# Fatal Frame (2001)\n\n## Overview\n\n**Developer:** Tecmo  \n**Platforms:** PlayStation 2, Xbox  \n**Release:** December 13, 2001 (Japan), March 4, 2002 (NA)  \n**Japanese Title:** Zero\n\n**Fatal Frame** (known as *Project Zero* in Europe) introduced one of horror gaming's most innovative mechanics: **fighting ghosts with a camera**. This unique approach to combat created a game about confronting terror head-on—literally.\n\n## The Camera Obscura\n\n### Weaponized Photography\nThe **Camera Obscura** is a mystical camera that can capture and exorcise spirits:\n\n- **Viewfinder mode** - first-person perspective for photographing ghosts\n- **Film types** - different films have different power (limited supply)\n- **Shutter chance** - timing ghost photos for critical hits\n- **Fatal Frame** - capturing multiple ghosts or perfectly-timed shots\n\n### Revolutionary Combat\nInstead of shooting guns, players must:\n- **Face the ghost** directly through the camera\n- **Wait for optimal shots** while spirits attack\n- **Manage film supply** (limited resource)\n- **Stay calm** while ghosts rush at you\n\nThis inverted typical horror game design—confronting rather than fleeing horror.\n\n## Story and Setting\n\n### Himuro Mansion\nMiku Hinasaki searches for her missing brother in the **Himuro Mansion**, site of a terrible ritual massacre. The mansion is haunted by violent spirits trapped by an ancient curse.\n\n### Japanese Horror Elements\n- **Onryō** - vengeful spirits from Japanese folklore\n- **Cursed rituals** and forbidden ceremonies\n- **Traditional architecture** - Japanese mansion setting\n- **Shinto and Buddhist** influences\n- **Cultural horror** rooted in Japanese ghost stories\n\n## Atmosphere and Design\n\n### Pure Terror\nFatal Frame excels at creating dread:\n- **Dark, atmospheric environments**\n- **Minimal combat options** increase vulnerability\n- **Sound design** - footsteps, whispers, screams\n- **Sudden appearances** - ghosts can attack without warning\n- **First-person camera mode** removes distance from threat\n\n### Ghost Design\nSpirits range from:\n- Sad, tragic victims\n- Violently angry entities\n- Grotesquely tortured souls\n- Each with disturbing backstories\n\n## Unique Mechanics\n\n### Photography as Exploration\n- Camera can **reveal hidden objects**\n- **Photographs contain clues** to the mansion's history\n- **Spirit fragments** tell stories of the dead\n- The camera serves as both weapon and investigation tool\n\n### Risk-Reward Combat\n- **Closer shots** deal more damage\n- **Multiple ghosts** create Fatal Frame opportunities\n- **Charging the camera** while ghosts attack\n- **High-risk, high-reward** gameplay loop\n\n## Cultural Impact\n\n### Eastern Horror in Gaming\nFatal Frame brought **Japanese horror** (J-Horror) aesthetics to gaming:\n- Influenced by Ring, Ju-On, and Kairo\n- Long-haired female ghosts became iconic\n- Cultural-specific horror rather than Western monsters\n- Slow-burn dread over action\n\n### Series Legacy\n- **Fatal Frame II: Crimson Butterfly** (2003) - considered the best\n- Multiple sequels expanding the mythology\n- Nintendo partnership for later entries\n- Inspired Spirit Camera and AR games\n\n## Why It's Special\n\n**Fatal Frame** succeeded because:\n- **Unique combat** - nothing else like it\n- **Authentic Japanese horror** atmosphere\n- **Forcing players to face fear** rather than run\n- **Rich backstory** and environmental storytelling\n- **Genuinely terrifying** encounters\n\n### Technical Achievement\n- PlayStation 2 hardware pushed for atmosphere\n- Lighting and shadow effects\n- Detailed ghost animations\n- Immersive sound design\n\n## Playing Today\n\nFatal Frame remains uniquely terrifying:\n- **Remastered versions** available on modern platforms\n- **Influence visible** in photography-based horror games\n- **Cult classic** status\n- **Still genuinely scary** decades later\n\n> *\"The Camera Obscura captures more than images... it captures souls.\"*\n\n**Fatal Frame** proved horror games could innovate mechanically while delivering pure terror. Its camera combat remains one of the genre's most brilliant ideas—turning confrontation into survival.","F":"md","G":null,"H":"2000s,tecmo,playstation-2,japanese-horror,innovative","I":"fatal_frame"},{"C":"amnesia-tdd","A":"Amnesia: The Dark Descent (2010)","I":"amnesia-tdd","D":1731974006000,"E":"# Amnesia: The Dark Descent (2010)\n\n## Overview\n\n**Developer:** Frictional Games  \n**Platforms:** PC, Mac, Linux, PlayStation 4, Xbox One, Switch  \n**Release:** September 8, 2010\n\n**Amnesia: The Dark Descent** revolutionized horror gaming by removing combat entirely. Players couldn't fight back—only run, hide, and survive. This design philosophy created one of the most terrifying games ever made and launched the \"hide-and-seek horror\" subgenre.\n\n## Revolutionary Design\n\n### No Combat System\n**Amnesia** broke survival horror conventions:\n- **No weapons** of any kind\n- **No fighting back** against monsters\n- **Complete vulnerability** at all times\n- **Only options:** run and hide\n\nThis powerlessness created unprecedented terror.\n\n### Sanity System\nThe game's **sanity mechanic** was revolutionary:\n\n**Sanity decreases from:**\n- Staying in darkness too long\n- Witnessing disturbing events\n- Looking at monsters\n- Staying near supernatural elements\n\n**Low sanity causes:**\n- Visual and audio hallucinations\n- Uncontrollable shaking\n- Making noise (alerting monsters)\n- Screen distortion\n- Increased monster detection\n\n**Balancing darkness vs. sanity** created constant tension—darkness is safe from monsters but dangerous for your mind.\n\n## Story and Atmosphere\n\n### The Narrative\nDaniel awakens in a dark castle with complete amnesia. He finds a note from himself: *\"Don't trust anyone. Kill Alexander.\"*\n\nAs Daniel explores the nightmarish **Brennenburg Castle**, he uncovers:\n- His own terrible crimes\n- An ancient evil\n- Forbidden knowledge\n- His desperate bargain\n\n### Cosmic Horror\nHeavily influenced by **H.P. Lovecraft**:\n- Ancient, incomprehensible entities\n- Forbidden knowledge destroying minds\n- Reality-warping horror\n- Humanity's insignificance\n- The Shadow pursuing Daniel\n\n## The Monsters\n\n### The Gatherers\n- **Grunt** - heavily encountered, grotesquely deformed\n- **Brute** - faster, stronger, more terrifying\n\nTheir design philosophy:\n- Don't look at them (drains sanity)\n- Can't fight them (no weapons)\n- Must hide and wait\n- Will search for you\n\n### The Invisible Water Monster\nThe flooded archives level became legendary:\n- Monster you **cannot see**\n- Track it by water displacement\n- Cannot hide—must keep moving\n- Creates unique, pure terror\n\n## Gameplay Mechanics\n\n### Physics Interactions\n- **Manual door opening** - increased immersion and tension\n- **Object manipulation** - searching drawers, moving obstacles\n- **Environmental puzzles** - using game world naturally\n- **Tinderboxes** - limited light sources\n\n### Oil Lantern Management\n- Finite oil supply\n- Light attracts monsters\n- But darkness drains sanity\n- Constant risk-reward decisions\n\n## Cultural Phenomenon\n\n### YouTube Horror Era\n**Amnesia** became synonymous with:\n- **Let's Play videos** and reaction content\n- PewDiePie's rise to fame\n- \"Scream-game\" genre of content\n- Twitch horror streaming\n\nIt proved horror games could be spectator entertainment.\n\n### Indie Horror Renaissance\n**Amnesia** inspired countless games:\n- Outlast\n- Slender\n- Five Nights at Freddy's\n- Countless indie horror titles\n- \"Hide-and-seek horror\" subgenre\n\n## Legacy\n\n### Design Influence\nAmnesia proved:\n- **Combat removal** could enhance horror\n- **Vulnerability** creates genuine fear\n- **Sanity mechanics** add psychological depth\n- **Environmental storytelling** works\n- **Less can be more** in horror\n\n### Frictional Games\n- Followed with **SOMA** (2015) - sci-fi existential horror\n- **Amnesia: Rebirth** (2020) - continuation of the series\n- Established studio as horror innovator\n\n### Technical Achievement\nThe **HPL Engine 2** delivered:\n- Dynamic lighting and shadows\n- Physics-based interaction\n- Atmospheric effects\n- Great performance even on modest PCs\n\n## Why It Still Terrifies\n\n**Amnesia** remains effective because:\n1. **Pure helplessness** - no combat safety net\n2. **Psychological horror** - sanity system\n3. **Smart enemy AI** - monsters actively hunt\n4. **Atmosphere** - oppressive dread throughout\n5. **Sound design** - one of the best in gaming\n6. **Pacing** - knows when to terrify and when to let you breathe\n\n## Playing Today\n\nOver a decade later:\n- Still genuinely frightening\n- Graphics hold up\n- Influential on modern horror\n- Available on all platforms\n- Custom stories and mods available\n\n> *\"I awake in the dark, terrified. I have no memory of how I got here or what this place is. The only things I can recall are my name—Daniel—and that something is hunting me.\"*\n\n**Amnesia: The Dark Descent** didn't just scare players—it redefined what horror games could be. By removing power and adding psychological depth, it created terror that lingers long after the game ends.\n\n*Don't look at them. Don't let them hear you. Don't let the darkness take you.*","F":"md","G":null,"H":"2010s,indie,pc,helplessness,revolutionary","I":"amnesia_tdd"},{"C":"outlast","A":"Outlast (2013)","I":"outlast","D":1731974007000,"E":"# Outlast (2013)\n\n## Overview\n\n**Developer:** Red Barrels  \n**Platforms:** PC, PlayStation 4, Xbox One, Switch  \n**Release:** September 4, 2013\n\n**Outlast** took the defenseless horror formula pioneered by Amnesia and added a camcorder with night vision, creating a found-footage horror game that's as intense as it is disturbing. Playing as a journalist investigating an asylum, players armed only with a camera must survive horrors that push the boundaries of the genre.\n\n## The Setup\n\n### Story\n**Miles Upshur**, an investigative journalist, receives an anonymous tip about inhumane experiments at **Mount Massive Asylum**. Armed only with his camcorder, he breaks in to expose the truth.\n\nHe finds far worse than expected:\n- Inmates have overthrown the asylum\n- Grotesque experiments have created monsters\n- A mysterious entity called the **Walrider** haunts the halls\n- Murkoff Corporation's evil runs deep\n- Escape becomes the only goal\n\n### Setting\nMount Massive Asylum is masterfully designed:\n- Dark, claustrophobic corridors\n- Disturbing asylum architecture  \n- Environmental horror and gore\n- Found documents telling the full story\n- Nowhere truly feels safe\n\n## The Camcorder Mechanic\n\n### Your Only Tool\nThe **camcorder** serves multiple purposes:\n\n**Night Vision:**\n- See in complete darkness\n- Drains batteries rapidly\n- Creates distinctive green glow\n- Sound effect alerts enemies\n- Limited battery supply\n\n**Recording:**\n- Miles documents what he sees\n- Provides context and narration\n- Character development through reactions\n- Found-footage horror aesthetic\n\n**Zooming:**\n- Scout areas safely\n- Find collectibles\n- Adds immersion\n\n### Battery Management\nBatteries are scarce:\n- Night vision drains them quickly\n- Darkness hides enemies but also paths\n- Finding batteries becomes crucial\n- Creates constant resource tension\n\n## No Combat, Pure Terror\n\n### Defenseless Gameplay\nLike Amnesia, you **cannot fight**:\n- No weapons\n- No fighting back\n- Only run and hide\n- Complete vulnerability\n\nBut Outlast adds:\n- **Parkour movement** - vault, climb, squeeze\n- **Faster pace** - more chase sequences\n- **Hiding spots** - lockers, beds, barrels\n- **Stamina system** - limited sprinting\n\n### Chase Sequences\nOutlast's chases are **relentless**:\n- Fast, aggressive enemies\n- Dynamic pursuit AI\n- Multiple escape routes\n- Heart-pounding intensity\n- No guaranteed safety\n\n## The Variants\n\n### Unforgettable Enemies\n\n**Chris Walker**\n- Massive, unstoppable pursuer\n- Can't hide from him long\n- Will break through walls\n- Recurring nightmare\n\n**The Twins (Rick and Nick)**\n- Cannibalistic brothers\n- Synchronized attacks\n- Chainsaw-wielding maniacs\n- One of the most disturbing boss encounters\n\n**Father Martin**\n- Guides and torments Miles\n- Religious zealot\n- Omnipresent threat\n- More than he appears\n\n**Eddie Gluskin (\"The Groom\")** (Whistleblower DLC)\n- Obsessed with creating a \"bride\"\n- Represents body horror\n- Disturbingly polite\n- Genuinely upsetting\n\n**Richard Trager**\n- The mad surgeon\n- Finger amputation scene (infamous)\n- Dark humor mixed with horror\n- Unforgettable antagonist\n\n## Atmosphere and Horror\n\n### Visual Design\n- **Graphic violence** - pushes boundaries\n- **Body horror** - disturbing imagery\n- **Gore** - copious amounts\n- **Darkness** - oppressive and constant\n- **Asylum aesthetic** - perfectly executed\n\n### Sound Design\nOutlast's audio is **phenomenally terrifying**:\n- Screams and distant violence\n- Footsteps tracking you\n- Breathing and whispers\n- Music sting scares\n- Environmental ambience\n\n## The Whistleblower DLC\n\nThe **Whistleblower** expansion:\n- **Waylon Park's** perspective (the tipster)\n- Even darker content\n- Eddie Gluskin (most disturbing villain)\n- Connects to main story\n- Shows events before and during Miles' investigation\n- Considered by many even better than the base game\n\n## Controversy and Impact\n\n### Mature Content\nOutlast faced controversy for:\n- Extreme violence\n- Sexual content and assault themes\n- Mental illness portrayal\n- Pushing horror boundaries\n\nBut it succeeded commercially and critically.\n\n### Found-Footage Horror\nThe camcorder aesthetic:\n- Connected to Blair Witch, REC, VHS\n- Made horror feel \"real\"\n- Unique visual identity\n- Immersive perspective\n\n## Technical Excellence\n\n### Unreal Engine 3\nOutlast's technical achievements:\n- Stunning graphics for 2013\n- Excellent lighting and shadows\n- Smooth performance\n- Great optimization\n- Atmospheric effects\n\n### Animation and Design\n- Realistic enemy animations\n- Fluid parkour movement\n- Detailed environments\n- Grotesque enemy designs\n\n## Legacy\n\n### Influence\nOutlast influenced:\n- **Resident Evil 7** (first-person horror)\n- **Alien: Isolation** (helpless survival)\n- Countless indie horror games\n- YouTube horror content\n\n### Series Expansion\n- **Outlast 2** (2017) - cult horror in Arizona\n- **The Outlast Trials** (2024) - co-op Cold War horror\n- Expanded Murkoff Corporation lore\n\n### YouTube Phenomenon\nLike Amnesia:\n- Millions of reaction videos\n- Boosted horror streaming\n- Contributed to horror game revival\n- Became a rite of passage for horror creators\n\n## Why It Works\n\n**Outlast** succeeds because:\n1. **Relentless pacing** - rarely lets up\n2. **Camcorder mechanic** - unique and immersive\n3. **Disturbing content** - genuinely upsetting\n4. **No combat** - pure vulnerability\n5. **Memorable villains** - each distinctly terrifying\n6. **Battery management** - resource tension\n7. **Environmental horror** - asylum setting perfect\n\n## Playing Today\n\nA decade later:\n- Still incredibly scary\n- Graphics hold up beautifully\n- Influenced countless games\n- Available on all platforms\n- Remains benchmark for horror intensity\n\n> *\"I want to know what's in that asylum. I want to document everything. But mostly... I just want to survive.\"* - Miles Upshur\n\n**Outlast** proved that horror games could be even more extreme, more intense, and more terrifying than before. It's not just a game—it's an endurance test of pure horror that few can complete without genuine fear.\n\n*Remember: When the night vision turns on, and you see what's coming... it's already too late.*","F":"md","G":null,"H":"2010s,indie,first-person,found-footage,intense","I":"outlast"}],"K":{},"L":false,"M":false,"_":{"A":"name","B":"desc","C":"id","D":"cd","E":"content","F":"editor","G":"parent","H":"tags","I":"slug","J":"pages","K":"img","L":"static","M":"published"}}</script> <script id=a>(()=>{var de=Object.defineProperty,wr=Object.defineProperties,Er=Object.getOwnPropertyDescriptor,Tr=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertyNames,Ue=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable;var je=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&je(e,r,t[r]);if(Ue)for(var r of Ue(t))_r.call(t,r)&&je(e,r,t[r]);return e},U=(e,t)=>wr(e,Tr(t));var ee=(e,t)=>()=>(e&&(t=e(e=0)),t);var L=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),B=(e,t)=>{for(var r in t)de(e,r,{get:t[r],enumerable:!0})},Ar=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of xr(t))!Ge.call(e,a)&&a!==r&&de(e,a,{get:()=>t[a],enumerable:!(n=Er(t,a))||n.enumerable});return e};var pe=e=>Ar(de({},"__esModule",{value:!0}),e);var _e=(e,t,r)=>new Promise((n,a)=>{var i=s=>{try{o(r.next(s))}catch(u){a(u)}},l=s=>{try{o(r.throw(s))}catch(u){a(u)}},o=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);o((r=r.apply(e,t)).next())});var Ne=L((jn,Be)=>{"use strict";Be.exports=function(t,r,n){var a,i=t.length;if(!(r>=i||n===0)){n=r+n>i?i-r:n;var l=i-n;for(a=r;a<l;++a)t[a]=t[a+n];t.length=l}}});var J=L((Gn,Je)=>{j.notEqual=Fr;j.notOk=Lr;j.equal=Sr;j.ok=j;Je.exports=j;function Sr(e,t,r){j(e==t,r)}function Fr(e,t,r){j(e!=t,r)}function Lr(e,t){j(!e,t)}function j(e,t){if(!e)throw new Error(t||"AssertionError")}});var Ke=L((Bn,ze)=>{var Cr=J(),Wr=typeof window!="undefined";function kr(){var e;return Wr?(window._nanoScheduler||(window._nanoScheduler=new se(!0)),e=window._nanoScheduler):e=new se,e}function se(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}se.prototype.push=function(e){Cr.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()};se.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(var r;e.queue.length&&t.timeRemaining()>0;)r=e.queue.shift(),r(t);e.scheduled=!1,e.queue.length&&e.schedule()})}};se.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};ze.exports=kr});var Qe=L((Nn,Xe)=>{var Ye=Ke()(),Ir=J(),N;he.disabled=!0;try{N=window.performance,he.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!N.mark}catch(e){}Xe.exports=he;function he(e){if(Ir.equal(typeof e,"string","nanotiming: name should be type string"),he.disabled)return Or;var t=(N.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,r="start-"+t+"-"+e;N.mark(r);function n(a){var i="end-"+t+"-"+e;N.mark(i),Ye.push(function(){var l=null;try{var o=e+" ["+t+"]";N.measure(o,r,i),N.clearMarks(r),N.clearMarks(i)}catch(s){l=s}a&&a(l,e)})}return n.uuid=t,n}function Or(e){e&&Ye.push(function(){e(new Error("nanotiming: performance API unavailable"))})}});var et=L((Jn,Ze)=>{var Rr=Ne(),qr=Qe(),P=J();Ze.exports=O;function O(e){if(!(this instanceof O))return new O(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}O.prototype.emit=function(e){P.ok(typeof e=="string"||typeof e=="symbol","nanobus.emit: eventName should be type string or symbol");for(var t=[],r=1,n=arguments.length;r<n;r++)t.push(arguments[r]);var a=qr(this._name+"('"+e.toString()+"')"),i=this._listeners[e];return i&&i.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,a.uuid),a(),this};O.prototype.on=O.prototype.addListener=function(e,t){return P.ok(typeof e=="string"||typeof e=="symbol","nanobus.on: eventName should be type string or symbol"),P.equal(typeof t,"function","nanobus.on: listener should be type function"),e==="*"?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this};O.prototype.prependListener=function(e,t){return P.ok(typeof e=="string"||typeof e=="symbol","nanobus.prependListener: eventName should be type string or symbol"),P.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),e==="*"?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this};O.prototype.once=function(e,t){P.ok(typeof e=="string"||typeof e=="symbol","nanobus.once: eventName should be type string or symbol"),P.equal(typeof t,"function","nanobus.once: listener should be type function");var r=this;this.on(e,n);function n(){t.apply(r,arguments),r.removeListener(e,n)}return this};O.prototype.prependOnceListener=function(e,t){P.ok(typeof e=="string"||typeof e=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),P.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var r=this;this.prependListener(e,n);function n(){t.apply(r,arguments),r.removeListener(e,n)}return this};O.prototype.removeListener=function(e,t){if(P.ok(typeof e=="string"||typeof e=="symbol","nanobus.removeListener: eventName should be type string or symbol"),P.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),e==="*")return this._starListeners=this._starListeners.slice(),r(this._starListeners,t);return typeof this._listeners[e]!="undefined"&&(this._listeners[e]=this._listeners[e].slice()),r(this._listeners[e],t);function r(n,a){if(n){var i=n.indexOf(a);if(i!==-1)return Rr(n,i,1),!0}}};O.prototype.removeAllListeners=function(e){return e?e==="*"?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this};O.prototype.listeners=function(e){var t=e!=="*"?this._listeners[e]:this._starListeners,r=[];if(t)for(var n=t.length,a=0;a<n;a++)r.push(t[a]);return r};O.prototype._emit=function(e,t,r,n){if(typeof e!="undefined"&&e.length!==0){r===void 0&&(r=t,t=null),t&&(n!==void 0?r=[t].concat(r,n):r=[t].concat(r));for(var a=e.length,i=0;i<a;i++){var l=e[i];l.apply(l,r)}}}});var rt=L((zn,tt)=>{var Ae=J(),Pr=/(noopener|noreferrer) (noopener|noreferrer)/,Dr=/^[\w-_]+:/;tt.exports=Mr;function Mr(e,t){Ae.notEqual(typeof window,"undefined","nanohref: expected window to exist"),t=t||window.document,Ae.equal(typeof e,"function","nanohref: cb should be type function"),Ae.equal(typeof t,"object","nanohref: root should be type object"),window.addEventListener("click",function(r){if(!(r.button&&r.button!==0||r.ctrlKey||r.metaKey||r.altKey||r.shiftKey||r.defaultPrevented)){var n=function a(i){if(!(!i||i===t))return i.localName!=="a"||i.href===void 0?a(i.parentNode):i}(r.target);n&&(window.location.protocol!==n.protocol||window.location.hostname!==n.hostname||window.location.port!==n.port||n.hasAttribute("data-nanohref-ignore")||n.hasAttribute("download")||n.getAttribute("target")==="_blank"&&Pr.test(n.getAttribute("rel"))||Dr.test(n.getAttribute("href"))||(r.preventDefault(),e(n)))}})}});var it=L((Kn,nt)=>{nt.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"]});var st=L((Yn,lt)=>{var at=it(),Vr=at.length,Hr=1,Ur=3,jr=8;lt.exports=Gr;function Gr(e,t){var r=e.nodeType,n=e.nodeName;r===Hr&&Br(e,t),(r===Ur||r===jr)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),n==="INPUT"?zr(e,t):n==="OPTION"?Jr(e,t):n==="TEXTAREA"&&Kr(e,t),Nr(e,t)}function Br(e,t){for(var r=t.attributes,n=e.attributes,a=null,i=null,l=null,o=null,s=null,u=n.length-1;u>=0;--u)s=n[u],o=s.name,a=s.namespaceURI,i=s.value,a?(o=s.localName||o,l=t.getAttributeNS(a,o),l!==i&&t.setAttributeNS(a,o,i)):t.hasAttribute(o)?(l=t.getAttribute(o),l!==i&&(i==="null"||i==="undefined"?t.removeAttribute(o):t.setAttribute(o,i))):t.setAttribute(o,i);for(var m=r.length-1;m>=0;--m)s=r[m],s.specified!==!1&&(o=s.name,a=s.namespaceURI,a?(o=s.localName||o,e.hasAttributeNS(a,o)||t.removeAttributeNS(a,o)):e.hasAttributeNS(null,o)||t.removeAttribute(o))}function Nr(e,t){for(var r=0;r<Vr;r++){var n=at[r];e[n]?t[n]=e[n]:t[n]&&(t[n]=void 0)}}function Jr(e,t){Se(e,t,"selected")}function zr(e,t){var r=e.value,n=t.value;Se(e,t,"checked"),Se(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),t.type!=="file"&&(r!==n&&(t.setAttribute("value",r),t.value=r),r==="null"&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?t.type==="range"&&(t.value=r):t.removeAttribute("value"))}function Kr(e,t){var r=e.value;if(r!==t.value&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r){if(r===""&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=r}}function Se(e,t,r){e[r]!==t[r]&&(t[r]=e[r],e[r]?t.setAttribute(r,""):t.removeAttribute(r))}});var dt=L((Xn,ct)=>{var Fe=J(),Yr=st(),Xr=3;ct.exports=Qr;function Qr(e,t,r){return Fe.equal(typeof e,"object","nanomorph: oldTree should be an object"),Fe.equal(typeof t,"object","nanomorph: newTree should be an object"),r&&r.childrenOnly?(ft(t,e),e):(Fe.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),me(t,e))}function me(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||ot(e)!==ot(t)?e:(Yr(e,t),ft(e,t),t):null:e}function ot(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function ft(e,t){for(var r,n,a,i,l=0,o=0;r=t.childNodes[o],n=e.childNodes[o-l],!(!r&&!n);o++)if(!n)t.removeChild(r),o--;else if(!r)t.appendChild(n),l++;else if(ut(n,r))a=me(n,r),a!==r&&(t.replaceChild(a,r),l++);else{i=null;for(var s=o;s<t.childNodes.length;s++)if(ut(t.childNodes[s],n)){i=t.childNodes[s];break}i?(a=me(n,i),a!==i&&l++,t.insertBefore(a,r)):!n.id&&!r.id?(a=me(n,r),a!==r&&(t.replaceChild(a,r),l++)):(t.insertBefore(n,r),l++)}}function ut(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName!==t.tagName?!1:e.type===Xr?e.nodeValue===t.nodeValue:!1}});var mt=L((Qn,ht)=>{"use strict";var pt=J();ht.exports=Zr;function Zr(e,t){pt.equal(typeof e,"function","nanoraf: render should be a function"),pt.ok(typeof t=="function"||typeof t=="undefined","nanoraf: raf should be a function or undefined"),t||(t=window.requestAnimationFrame);var r=!1,n=null;return function(){n===null&&!r&&(r=!0,t(function(){r=!1;for(var l=n.length,o=new Array(l),s=0;s<l;s++)o[s]=n[s];e.apply(e,o),n=null})),n=arguments}}});var Le,ge,ve=ee(()=>{Le=(e,t,r={})=>{var{events:n}=e,{showDelete:a=!1,showUsed:i=!1,insert:l=null}=r,o=s();return html`<section> <h1>Embedded Images</h1> ${o.map(c=>html`<div class="ib at ed w14"> <div class=g> <img src=${c.img} class=w1 aria-describedby=${c.id}_alt> <span id=${c.id}_alt class=db>${c.alt} (${c.size[0]}x${c.size[1]}px)</span> <div class=pb> <button type=button onclick=${d=>u(c.img)}>View</button> ${a?html`<button type=button onclick=${d=>m(c)}>Edit Alt</button>`:""} ${a?html`<button type=button class=del onclick=${d=>p(c)}>Delete</button>`:""} ${l?html`<button type=button onclick=${d=>l(d,c)}>Insert</button>`:""} </div> ${i?[html`<details> <summary class=b>Used in ${c.pgs.length} pages</summary> <ul> ${c.pgs.map(d=>html`<li><a href="?page=${d.slug}">${d.name}</a></li>`)} </ul> </details>`]:""} </div> </div>`)} </section>`;function s(){var{pages:c,img:d}=e.p;return Object.keys(d).map(h=>U(q({id:h},d[h]),{pgs:i?c.filter(g=>{var w;return(w=g.content)==null?void 0:w.includes(`img:${h}:img`)}):[]}))}function u(c){var d=new Image;d.src=c;var h=window.open("");h.document.write(d.outerHTML)}function m(c){var d;e.p.img[c.id].alt=(d=prompt("Alt text:",c.alt))!=null?d:c.alt,t(n.CHECK_CHANGED)}function p(c){if(!confirm("Permanently delete image from all pages in wiki?"))return!1;delete e.p.img[c.id],c.pgs.length>0&&(e.p.pages=e.p.pages.map(d=>(d.content&&(d.content=d.content.replaceAll(`img:${c.id}:img`,"deleted")),d))),t(n.CHECK_CHANGED)}},ge=(e,t)=>html`<dialog id=g> <form class=fr method=dialog> <button>Close</button> </form> ${Le(e,()=>{},{insert:(r,n)=>FW.img.put(r,n,t)})} </dialog>`});var Ce,wt,We=ee(()=>{Ce=e=>{var u;var{img:t,pg:r,out:n,hLink:a}=FW.inject,i=[],l=0,o=((u=e.content)!=null?u:"").replace(new RegExp("(<nowiki>.*<\\/nowiki>)","gs"),(m,p)=>(i[l]=p,`{nowiki-${l++}}`));o=r(FW.img.fix(o)),o=e.editor==="md"?md(o!=null?o:""):o,o=t(a(n(o)));for(var s=0;s<l;s++)o=o.replace(`{nowiki-${s}}`,i[s]);return o},wt=e=>{var n;var t=Ce(e),r=FW.getChildren(e,!0);return[!(e!=null&&e.e)&&((n=e==null?void 0:e.tags)!=null&&n.length)?html`<aside class="db r"> <b class=c>Tagged:</b> <dd class=c> ${e.tags.replace(/,/g,", ")} </dd> </aside>`:"",html`<article class=uc> ${t?html.raw(t):"No Page Content"} </article>`,r.length>0?html`<footer> <h2>Sub Pages</h2> <ul> ${r.map(a=>FW.getChildList(a,!0))} </ul> </footer>`:null]}});var Et={};B(Et,{editor:()=>an});var an,Tt=ee(()=>{We();ve();an=e=>{var t=html`<div class="ed ed-c" style=display:none></div>`,r=i=>{e.edits.content=i.target.value,clearTimeout(e.debounce),e.debounce=setTimeout(()=>{t.innerHTML=Ce(U(q({},e.edits),{editor:"md"}))},500)},n=html`<textarea oninput=${r}>${e.edits.content}</textarea>`;return r({target:n}),[n,html`<button onclick=${i=>{i.preventDefault(),t.style.display=t.style.display=="none"?"block":"none"}}>Preview</button>`,html`<button onclick=${i=>{i.preventDefault(),FW.img.upload(e,a)}}>Insert Image from File</button>`,html`<button onclick=${i=>{i.preventDefault(),document.getElementById("g").showModal()}}>Add Existing Image</button>`,t,ge(e,a)];function a({id:i}){var l=`![](img:${i}:img)`;if(document.activeElement!==n&&n.focus(),document.selection){var o=document.selection.createRange();o.text=l}else if(n.selectionStart||n.selectionStart===0){var s=n.selectionStart,u=n.selectionEnd;n.value=n.value.substring(0,s)+l+n.value.substring(u,n.value.length),n.selectionStart=s+l.length,n.selectionEnd=s+l.length}else n.value+=l;r({target:n})}}});var xt={};B(xt,{editor:()=>ln});var ln,_t=ee(()=>{ve();ln=(e,t)=>{var o;var{init:r}=ed,{src:n,edits:a}=e,{content:i}=a,l;return n?l=html`<textarea onchange=${s=>e.edits.content=s.target.value}>${FW.img.abbr(i)}</textarea>`:(l=r({onChange:s=>e.edits.content=s}),l.isSameNode=()=>!0,l.edUc.innerHTML=i.includes("<img ")?FW.inject.img(i,!0):i),[l,html`<div class="w1 tr pb"> <button type=button onclick=${()=>{e.src=!n,t(e.events.RENDER)}}> ${n?"Show Editor":"Show HTML"} </button> </div>`,ge(e,(o=l.edUc)==null?void 0:o.ins)]}});var Nt=L((Ii,Bt)=>{Bt.exports=_n;var Gt={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function _n(e){return function(t,r,n){for(var a in r)a in Gt&&(r[Gt[a]]=r[a],delete r[a]);return e(t,r,n)}}});var zt=L((Oi,Jt)=>{var An=Nt(),te=0,M=1,k=2,ye=3,D=4,S=5,De=6,K=7,C=8,ne=9,ie=10,ue=11,Y=12,re=13;Jt.exports=function(e,t){t||(t={});var r=t.concat||function(a,i){return String(a)+String(i)};return t.attrToProp!==!1&&(e=An(e)),function(a){for(var i=M,l="",o=arguments.length,s=[],u=0;u<a.length;u++)if(u<o-1){var m=arguments[u+1],p=V(a[u]),c=i;c===ie&&(c=C),c===ne&&(c=C),c===K&&(c=C),c===D&&(c=S),c===k?l==="/"?(p.push([k,"/",m]),l=""):p.push([k,m]):c===re&&t.comments?l+=String(m):c!==re&&p.push([te,c,m]),s.push.apply(s,p)}else s.push.apply(s,V(a[u]));for(var d=[null,{},[]],h=[[d,-1]],u=0;u<s.length;u++){var g=h[h.length-1][0],p=s[u],w=p[0];if(w===k&&/^\//.test(p[1])){var v=h[h.length-1][1];h.length>1&&(h.pop(),h[h.length-1][0][2][v]=e(g[0],g[1],g[2].length?g[2]:void 0))}else if(w===k){var T=[p[1],{},[]];g[2].push(T),h.push([T,g[2].length-1])}else if(w===S||w===te&&p[1]===S){for(var E="",W;u<s.length;u++)if(s[u][0]===S)E=r(E,s[u][1]);else if(s[u][0]===te&&s[u][1]===S)if(typeof s[u][2]=="object"&&!E)for(W in s[u][2])s[u][2].hasOwnProperty(W)&&!g[1][W]&&(g[1][W]=s[u][2][W]);else E=r(E,s[u][2]);else break;s[u][0]===ue&&u++;for(var y=u;u<s.length;u++)if(s[u][0]===C||s[u][0]===S)g[1][E]?s[u][1]===""||(g[1][E]=r(g[1][E],s[u][1])):g[1][E]=n(s[u][1]);else if(s[u][0]===te&&(s[u][1]===C||s[u][1]===S))g[1][E]?s[u][2]===""||(g[1][E]=r(g[1][E],s[u][2])):g[1][E]=n(s[u][2]);else{E.length&&!g[1][E]&&u===y&&(s[u][0]===ye||s[u][0]===Y)&&(g[1][E]=E.toLowerCase()),s[u][0]===ye&&u--;break}}else if(w===S)g[1][p[1]]=!0;else if(w===te&&p[1]===S)g[1][p[2]]=!0;else if(w===ye){if(Ln(g[0])&&h.length){var v=h[h.length-1][1];h.pop(),h[h.length-1][0][2][v]=e(g[0],g[1],g[2].length?g[2]:void 0)}}else if(w===te&&p[1]===M)p[2]===void 0||p[2]===null?p[2]="":p[2]||(p[2]=r("",p[2])),Array.isArray(p[2][0])?g[2].push.apply(g[2],p[2]):g[2].push(p[2]);else if(w===M)g[2].push(p[1]);else if(!(w===ue||w===Y))throw new Error("unhandled: "+w)}if(d[2].length>1&&/^\s*$/.test(d[2][0])&&d[2].shift(),d[2].length>2||d[2].length===2&&/\S/.test(d[2][1])){if(t.createFragment)return t.createFragment(d[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(d[2][0])&&typeof d[2][0][0]=="string"&&Array.isArray(d[2][0][2])&&(d[2][0]=e(d[2][0][0],d[2][0][1],d[2][0][2])),d[2][0];function V(G){var x=[];i===K&&(i=D);for(var A=0;A<G.length;A++){var f=G.charAt(A);i===M&&f==="<"?(l.length&&x.push([M,l]),l="",i=k):f===">"&&!Sn(i)&&i!==re?(i===k&&l.length?x.push([k,l]):i===S?x.push([S,l]):i===C&&l.length&&x.push([C,l]),x.push([ye]),l="",i=M):i===re&&/-$/.test(l)&&f==="-"?(t.comments&&x.push([C,l.substr(0,l.length-1)]),l="",i=M):i===k&&/^!--$/.test(l)?(t.comments&&x.push([k,l],[S,"comment"],[ue]),l=f,i=re):i===M||i===re?l+=f:i===k&&f==="/"&&l.length||(i===k&&/\s/.test(f)?(l.length&&x.push([k,l]),l="",i=D):i===k?l+=f:i===D&&/[^\s"'=/]/.test(f)?(i=S,l=f):i===D&&/\s/.test(f)?(l.length&&x.push([S,l]),x.push([Y])):i===S&&/\s/.test(f)?(x.push([S,l]),l="",i=De):i===S&&f==="="?(x.push([S,l],[ue]),l="",i=K):i===S?l+=f:(i===De||i===D)&&f==="="?(x.push([ue]),i=K):(i===De||i===D)&&!/\s/.test(f)?(x.push([Y]),/[\w-]/.test(f)?(l+=f,i=S):i=D):i===K&&f==='"'?i=ie:i===K&&f==="'"?i=ne:i===ie&&f==='"'?(x.push([C,l],[Y]),l="",i=D):i===ne&&f==="'"?(x.push([C,l],[Y]),l="",i=D):i===K&&!/\s/.test(f)?(i=C,A--):i===C&&/\s/.test(f)?(x.push([C,l],[Y]),l="",i=D):(i===C||i===ne||i===ie)&&(l+=f))}return i===M&&l.length?(x.push([M,l]),l=""):i===C&&l.length?(x.push([C,l]),l=""):i===ie&&l.length?(x.push([C,l]),l=""):i===ne&&l.length?(x.push([C,l]),l=""):i===S&&(x.push([S,l]),l=""),x}};function n(a){return typeof a=="function"||typeof a=="string"||a&&typeof a=="object"||a==null?a:r("",a)}};function Sn(e){return e===ne||e===ie}var Fn=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9\x7F-\uFFFF_:-]+)*$");function Ln(e){return Fn.test(e)}});var Zt=L((Ri,Qt)=>{"use strict";var $e=/\n[\s]+$/,we=/^\n[\s]+/,Kt=/[\s]+$/,Yt=/^[\s]+/,Ee=/[\n\s]+/g,Xt=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Te=["code","pre","textarea"];Qt.exports=function e(t,r){if(Array.isArray(r))for(var n=t.nodeName.toLowerCase(),a=!1,i,l,o=0,s=r.length;o<s;o++){var u=r[o];if(Array.isArray(u)){e(t,u);continue}(typeof u=="number"||typeof u=="boolean"||typeof u=="function"||u instanceof Date||u instanceof RegExp)&&(u=u.toString());var m=t.childNodes[t.childNodes.length-1];if(typeof u=="string")a=!0,m&&m.nodeName==="#text"?m.nodeValue+=u:(u=t.ownerDocument.createTextNode(u),t.appendChild(u),m=u),o===s-1&&(a=!1,Xt.indexOf(n)===-1&&Te.indexOf(n)===-1?(i=m.nodeValue.replace(we,"").replace(Kt,"").replace($e,"").replace(Ee," "),i===""?t.removeChild(m):m.nodeValue=i):Te.indexOf(n)===-1&&(l=o===0?"":" ",i=m.nodeValue.replace(we,l).replace(Yt," ").replace(Kt,"").replace($e,"").replace(Ee," "),m.nodeValue=i));else if(u&&u.nodeType){a&&(a=!1,Xt.indexOf(n)===-1&&Te.indexOf(n)===-1?(i=m.nodeValue.replace(we,"").replace($e," ").replace(Ee," "),i===""?t.removeChild(m):m.nodeValue=i):Te.indexOf(n)===-1&&(i=m.nodeValue.replace(Yt," ").replace(we,"").replace($e," ").replace(Ee," "),m.nodeValue=i));var p=u.nodeName;p&&(n=p.toLowerCase()),t.appendChild(u)}}}});var tr=L((qi,er)=>{"use strict";er.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]});var nr=L((Pi,rr)=>{"use strict";rr.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]});var ar=L((Di,ir)=>{"use strict";ir.exports=["indeterminate"]});var sr=L((Mi,lr)=>{"use strict";var Cn=zt(),Wn=Zt(),kn=tr(),In=nr(),On=ar(),Rn="http://www.w3.org/2000/svg",qn="http://www.w3.org/1999/xlink",Pn="!--";lr.exports=function(e){function t(a,i,l){var o;kn.indexOf(a)!==-1&&(i.namespace=Rn);var s=!1;i.namespace&&(s=i.namespace,delete i.namespace);var u=!1;if(i.is&&(u=i.is,delete i.is),s)u?o=e.createElementNS(s,a,{is:u}):o=e.createElementNS(s,a);else{if(a===Pn)return e.createComment(i.comment);u?o=e.createElement(a,{is:u}):o=e.createElement(a)}for(var m in i)if(i.hasOwnProperty(m)){var p=m.toLowerCase(),c=i[m];if(p==="classname"&&(p="class",m="class"),m==="htmlFor"&&(m="for"),In.indexOf(p)!==-1){if(String(c)==="true")c=p;else if(String(c)==="false")continue}p.slice(0,2)==="on"||On.indexOf(p)!==-1?o[m]=c:s?m==="xlink:href"?o.setAttributeNS(qn,m,c):/^xmlns($|:)/i.test(m)||o.setAttributeNS(null,m,c):o.setAttribute(m,c)}return Wn(o,l),o}function r(a){for(var i=e.createDocumentFragment(),l=0;l<a.length;l++)a[l]!=null&&(Array.isArray(a[l])?i.appendChild(r(a[l])):(typeof a[l]=="string"&&(a[l]=e.createTextNode(a[l])),i.appendChild(a[l])));return i}var n=Cn(t,{comments:!0,createFragment:r});return n.default=n,n.createComment=t,n}});var ur=L((Vi,or)=>{or.exports=sr()(document)});var cr=L((Hi,fr)=>{"use strict";function Dn(e){var t=document.createElement("div");return t.innerHTML=e,Mn(t.childNodes)}function Mn(e){return Array.isArray(e)?e:[].slice.call(e)}fr.exports=Dn});var hr={};B(hr,{bar:()=>Ve,default:()=>Vn,init:()=>pr});var X,Me,dr,ae,F,R,Ve,pr,Vn,mr=ee(()=>{X="formatBlock",Me=(e,t,r)=>e.addEventListener(t,r),dr=(e,t)=>e.appendChild(t),ae=e=>document.queryCommandState(e),F=(e,t=null)=>document.execCommand(e,!1,t),Ve=[{icon:"\u2612",title:"Clear Formatting",result:()=>F("removeFormat")},{icon:"<b>B</b>",title:"Bold",state:()=>ae("bold"),result:()=>F("bold")},{icon:"<i>I</i>",title:"Italic",state:()=>ae("italic"),result:()=>F("italic")},{icon:"<u>U</u>",title:"Underline",state:()=>ae("underline"),result:()=>F("underline")},{icon:"<b>H</b>",title:"Heading",result:()=>F(X,"<h2>")},{icon:"<b>H<sub>2</sub></b>",title:"Sub-Heading",result:()=>F(X,"<h3>")},{icon:"\xB6",title:"Paragraph",result:()=>F(X,"<p>")},{icon:"\u21A6",title:"Align Left",state:()=>ae("justifyLeft"),result:()=>F("justifyLeft")},{icon:"\u2194",title:"Align Center",state:()=>ae("justifyCenter"),result:()=>F("justifyCenter")},{icon:"\u21A4",title:"Align Right",state:()=>ae("justifyRight"),result:()=>F("justifyRight")},{icon:"#",title:"Number List",result:()=>F("insertOrderedList")},{icon:"\u2022",title:"Bulvar List",result:()=>F("insertUnorderedList")},{icon:"\u201C \u201D",title:"Quote",result:()=>F(X,"<blockquote>")},{icon:"\u2015",title:"Separator",result:()=>F("insertHorizontalRule")},{icon:"\u{1F517}",title:"Link",result:()=>{var e=window.prompt("Link URL:");e&&F("createLink",e)}},{icon:"\u{1F5BC}\uFE0F",title:"Link External Image",result:()=>{var e=window.prompt("Image URL:");e&&F("insertImage",e)}},{icon:"\u{1F4F8}",title:"Insert Image from File",result:()=>FW.img.upload(FW.state,R.ins)},{icon:"\u{1F4CE}",title:"Add Existing Image",result:()=>FW.emit(FW.state.events.RENDER,()=>document.getElementById("g").showModal())}],pr=e=>{var a;var t=document.querySelector("#e");if(t&&!e.rebuild)return t;t==null||t.parentNode.removeChild(t);var r=html`<div id=e class=ed></div>`;R=r.edUc=html`<div class=ed-uc contenteditable=true oninput=${({target:{firstChild:i}})=>{i&&i.nodeType===3?F(X,"<p>"):R.innerHTML==="<br>"&&(R.innerHTML=""),e.onChange(R.innerHTML)}} onkeydown=${i=>{i.key==="Enter"&&document.queryCommandValue(X).match(/blockquote|h\d/)&&setTimeout(()=>F(X,"<p>"),0),i.key==="Tab"&&(i.preventDefault(),setTimeout(()=>F(i.shiftKey?"outdent":"indent"),0))}}></div>`,R.ins=i=>{document.activeElement!==R&&R.focus(),F("insertHTML",`<p><img src="${i.img}#${i.id}"></p>`)};var n=html`<div class=ed-bar role=toolbar> ${((a=ed.bar)!=null?a:Ve).map(i=>{var l=html`<button class=ed-btn type=button title=${i.title} onclick=${()=>i.result()&&R.focus()}> ${html.raw(i.icon)} </button>`;if(i.state){var o=()=>l.classList[i.state()?"add":"remove"]("ed-sel");Me(R,"keyup",o),Me(R,"mouseup",o),Me(l,"click",o)}return l})} </div>`;return dr(r,n),dr(r,R),F("defaultParagraphSeparator","p"),r},Vn={bar:Ve,init:pr}});var vr={};B(vr,{default:()=>gr});function gr(e){if(!e)return"";var t=[],r=0,n=[],a=0,i=e.length;e[i-1]!==`
`&&e[i-2]!==`
`&&(e+=`

`),e=e.replace(/\\(.)/g,(p,c)=>xe[c]||p).replace(/```(.*)\n([^\0]+?)```(?!```)/gm,(p,c,d)=>(t[r]={lang:c,block:fe(d)},`{code-${r++}}`)).replace(/`([^`]+?)`/g,(p,c)=>`<code>${fe(c)}</code>`).replace(/<([^>\s]+(\/\/|@)[^>\s]+)>/g,(p,c,d)=>`[${c}](${d==="@"?"mailto:":""}${c})`).replace(/(!?)\[([^\]]*?)\]\(([^\s\n]*)(?:| "(.*)")\)/gm,(p,c,d,h,g)=>{d=fe(d);try{h=decodeURI(h)}catch(w){}return h=encodeURI(h),g=g?` title="${fe(g)}"`:"",c?`<img src="${h}" alt="${d}"${g}>`:`<a href="${h}"${g}>${d}</a>`}).replace(/(<\/?[a-zA-Z]+[^>]*>)/gm,(p,c)=>(n[a]=c,`{html-${a++}}`)).replace(/^[ \t]*>+ (.*)/gm,`<blockquote>
$1
</blockquote>`).replace(/(<\/blockquote>\n?<blockquote>)+?/g,"").replace(/^(#+) +(.*)/gm,(p,c,d)=>`<h${c.length}>${d}</h${c.length}>`).replace(/^([^\n\t ])(.*)\n====+/gm,"<h1>$1$2</h1>").replace(/^([^\n\t ])(.*)\n----+/gm,"<h2>$1$2</h2>").replace(/\n( *[-*]){3,}\n/gm,"<hr>").replace(/\[( |x)\]/g,(p,c)=>`<input type="checkbox" disabled${c.toLowerCase()==="x"?" checked":""}>`).replace(/  +\n/gm,"<br>").replace(/^([^-\+\*\d<\t \n])([^]*?)(?:\n\n)/gm,(p,c,d)=>`<p>${c}${d}</p>
`);var l;e=e.replace(/^([\t ]*)(?:(-|\+|\*)|(\d+(?:\)|\.))) (.*)/gm,(p,c,d,h,g)=>{c.length>0&&!l?l=c.replace(/[^ ]/g,""):c.length===0&&l&&(l=void 0),l&&(c=c.replace(new RegExp(l,"g"),"	"));var w=h?"o":"u";return`${c}<${w}l><li>${g}</li></${w}l>`});for(var o=/<\/li><\/(u|o)l>\n(\t+)<(u|o)l><li>(.*)<\/li><\/(u|o)l>/;e.match(o);)e=e.replace(o,function(p,c,d,h,g,w){return d.length>0&&(d=d.substring(1),d.length>0&&(d=`
`+d)),`${d}<${h}l><li>${g}</li></${w}l></li></${c}l>`});e=e.replace(/(<\/ul>\n?[ \t]*<ul>)+?/g,"").replace(/(<\/ol>\n?[ \t]*<ol>)+?/g,"").replace(/\*\*([^\n*]+?)\*\*/g,"<strong>$1</strong>").replace(/__([^\n_]+?)__/g,"<strong>$1</strong>").replace(/\*([^\n*]+?)\*/g,"<em>$1</em>").replace(/_([^\n_]+?)_/g,"<em>$1</em>").replace(/(?:~~)([^~]+?)(?:~~)/g,"<del>$1</del>");for(var s=0;s<a;s++)e=e.replace(`{html-${s}}`,n[s]);for(var s=0;s<r;s++){var{lang:u,block:m}=t[s];e=e.replace(`{code-${s}}`,`<pre><code${u?` class="language-${u}"`:""}>${fe(m)}</code></pre>`)}return e.trim()}var xe,Hn,fe,br=ee(()=>{xe={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;",$:"&#36;","&":"&amp;","[":"&#91;","]":"&#93;","(":"&#40;",")":"&#41;",_:"&#95;","*":"&ast;","`":"&#96;"},Hn=Object.keys(xe).filter(e=>e!="&").map(e=>xe[e].replace(e!="&"?"&":"","")),fe=e=>e.replace(/[<>$&\(\)\[\]"']/g,t=>xe[t]||t).replace(new RegExp(`&amp;(${Hn.join("|")})`,"g"),"&$1")});var en=et(),tn=rt(),gt=dt(),rn=mt(),vt=()=>{var e={};return new URLSearchParams(window.location.search).forEach((t,r,n)=>{t=n.getAll(r),e[r]=t.length>1?t:t[0]}),e},nn={};function z(){if(!(this instanceof z))return new z;this.ready=e=>{document.readyState==="complete"||document.readyState==="interactive"?e():document.addEventListener("DOMContentLoaded",e)},this._events={ONLOAD:"DOMContentLoaded",TITLE:"DOMTitleChange",RENDER:"render",GO:"go"},this._loaded=!1,this._tree=null,this._view=()=>{},this.emitter=en("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this.state={events:this._events,title:document.title,query:vt()},this.emitter.prependListener(this._events.TITLE,e=>{this.state.title=document.title=e})}z.prototype.start=function(){var e=()=>{var r=document.getElementById(location.hash.substring(1));return r?(r==null||r.scrollIntoView(),!0):!1};this.emitter.prependListener(this._events.GO,(r=null,n="push")=>{r&&history[n+"State"](nn,this.state.title,r),this.state.query=vt(),this._loaded&&this.emit(this._events.RENDER,()=>{e()||window.scroll(0,0)})}),window.onpopstate=()=>{this.emit(this._events.GO)},tn(({href:r})=>{var n=window.location.href;r!==n&&this.emit(this._events.GO,r)});var t=()=>this._view(this.state,this.emit);return this._tree=t(),this._rq=[],this._rd=null,this.emitter.prependListener(this._events.RENDER,r=>{typeof r=="function"&&this._rq.push(r),this._rd!==null&&clearTimeout(this._rd),this._rd=setTimeout(rn(()=>{var n=t();for(gt(this._tree,n);this._rq.length>0;)this._rq.shift()()}),9)}),this.ready(()=>{this.emit(this._events.ONLOAD),this._loaded=!0,e()}),this._tree};z.prototype.mount=function(e){this.ready(()=>{var t=this.start();typeof e=="string"?this._tree=document.querySelector(e):this._tree=e,gt(this._tree,t)})};var bt=(e,t)=>{var{p:r}=e;return[html`<header> <h1>All Pages</h1> </header>`,html`<ul> ${r.pages.filter(n=>!n.parent).map(n=>FW.getChildList(n))} </ul>`]};ve();var yt=(e,t)=>{var p,c;var{events:r,p:n,c:a,j:i}=e,l=n.pages.map(d=>d.slug).join(`
`);return[html`<header> <h1>Wiki Settings</h1> </header>`,html`<article class=mw> <form onsubmit=${o} class=pb> <label for=wTitle>Wiki Title</label> <input class=w1 id=wTitle value=${n.name} minlength=1 required> <label for=wDesc>Wiki Description</label> <input class=w1 id=wDesc value=${n.desc}> <label for=home>Home Page</label> <select id=home> <option value="" selected=${!n.home}>All Pages (default)</option> ${n.pages.map(d=>html`<option selected=${d.id===n.home} value=${d.id}>${d.name} (${d.slug})</option>`)} </select> <label for=wPo>Page Order</label> <textarea id=wPo class=notab>${l}</textarea> <label for=wCss>Custom CSS</label> <textarea id=wCss>${a}</textarea> <label for=wJs>Custom JS</label> <span class=h>Only runs once on wiki load. To test, save wiki & load that file.</span> <textarea id=wJs>${i}</textarea> <label for=wHead>Custom Head</label> <span class=h>Add HTML directly to head element. To test, save wiki & load that file. Be careful! Malformed HTML will break wiki.</span> <textarea id=wHead>${FW.inject.esc(n.head,!0)}</textarea> <label for=wOut>Include Static HTML</label> <input id=wOut type=checkbox checked=${(p=n.static)!=null?p:!1}> <span class=h>Include the wiki content in plain HTML for non-JS browsers. Nearly doubles output size.</span> <label for=wPub>Publish</label> <input id=wPub type=checkbox checked=${(c=n.published)!=null?c:!1}> <span class=h>Hides Save, New Page, & Wiki Settings buttons. Manually visit settings to unset this: <code>?page=s</code></span> <div class=tr> <button type=submit>Update</button> </div> </form> <div class=tr> <p class="pb h"> Feather Wiki Version: 1.8.1 (Meadowlark) </p> <p> <button class=del onclick=${()=>s()}>Import & Overwrite with Other Feather Wiki file</button> </p> </div> ${Le(e,t,{showDelete:!0,showUsed:!0})} </article>`];function o(d){d.preventDefault();var h=d.currentTarget,g=h.wTitle.value.trim();if(g.length<1)return alert("Title is required");e.p.name=g,e.p.desc=h.wDesc.value.trim(),h.home.value.length>1?e.p.home=h.home.value:delete e.p.home;var w=h.wPo.value.split(`
`).map(v=>v.trim());e.p.pages.sort((v,T)=>w.indexOf(v.slug)<w.indexOf(T.slug)?-1:1),u(h.wCss.value),m(h.wJs.value),h.wHead.value.trim()?e.p.head=FW.inject.esc(h.wHead.value):delete e.p.head,e.p.static=h.wOut.checked,e.p.published=h.wPub.checked,t(r.CHECK_CHANGED),t(r.NOTIFY,"Settings updated")}function s(){FW.upload("text/html",d=>{FW.xtr(d,h=>{h&&(e.p=h[0],u(h[1]),m(h[2]),t(r.ONLOAD),t(r.CHECK_CHANGED),t(r.NOTIFY,"Wiki Loaded"))})})}function u(d){var h=document.getElementById("c");d.trim()?(e.c=d,h?h.innerHTML=d:document.head.innerHTML+=`<style id=c>${d}</style>`):(delete e.c,h&&document.head.removeChild(h))}function m(d){d.trim()?(e.j!==d&&alert("You must save & reload to run your JavaScript"),e.j=d):delete e.j}};var $t=(e,t)=>{var{p:r,query:n}=e,a=r.pages.filter(i=>{var l,o;return(o=(l=i.tags)==null?void 0:l.split(","))==null?void 0:o.includes(n.tag)});return[html`<header> <h1>Pages Tagged <code>${n.tag}</code></h1> </header>`,html`<article> ${a.length>0?html`<ul> ${a.map(i=>html`<li><a href="?page=${i.slug}">${i.name}</a></li>`)} </ul>`:"None Found"} </article>`]};We();var At=(e,t,r)=>{var{events:n,edits:a,p:i}=e,l=FW.getChildren(r).map(v=>v.id),o=!i.pages.some(v=>v.id===r.id),{useMd:s}=a;function u(v){v.preventDefault();var{useMd:T,content:E}=a;T?confirm(`Convert Markdown to HTML?
("Cancel" to go without converting)`)&&(e.edits.content=md(E)):e.edits.content=FW.img.abbr(E),e.edits.useMd=!T,t(n.RENDER)}var m=[html`<div class="w1 tr"> <button onclick=${u}>${s?"Use Editor":"Use Markdown"}</button> </div>`,(s?(Tt(),pe(Et)):(_t(),pe(xt))).editor(e,t)];return html`<form onsubmit=${g}> <header> <h1>Edit Page</h1> <div class=r> <div class="c w12"> <label for=name>Page Title</label> <input id=name value=${a.name} required minlength=2 onchange=${c}> </div> <div class="c w12"> <label for=slug>Page Slug</label> <input id=slug value=${a.slug} required minlength=2 onchange=${c}> <button onclick=${p}>Slugify Title</button> </div> </div></header> <span class=h style=float:left>Internal links (hash optional): [[Page Title]] or [[text|page_slug#heading]].</span> ${m} <footer class=r> <div class="c w13"> <label for=tags>Page Tags</label> <input id=tags value=${a.tags} placeholder="Comma, Separated, List" onchange=${c}> <select onchange=${h}> <option value="" selected=selected disabled=disabled>Add Existing Tag</option> ${e.t.filter(v=>!a.tags.split(",").includes(v)).map(v=>html`<option>${v}</option>`)} </select> </div> <div class="c w13"> <label for=parent>Parent</label> <select id=parent onchange=${c}> <option value="" selected=${a.parent===""}>None</option> ${i.pages.filter(v=>v.id!==(r==null?void 0:r.id)&&!l.includes(v.id)).map(v=>html`<option selected=${v.id===a.parent} value=${v.id}>${v.name} (${v.slug})</option>`)} </select> <label>Hide Page <input type=checkbox id=hide onchange=${v=>e.edits.hide=v.target.checked} checked=${a.hide}></label> </div> <div class="c w13 tr"> <div class=pb><button type=submit>Save</button></div> ${o?"":[html`<div class=pb><button onclick=${v=>{v.preventDefault(),t(n.CANCEL_EDIT)}}>Cancel</button></div>`,html`<div><button class=del onclick=${v=>w(v)}>Delete</button></div>`]} </div> </footer> </form>`;function p(v){v.preventDefault(),document.getElementById("slug").value=FW.slug(document.getElementById("name").value.trim())}function c(v){var T=v.target;e.edits[T.id]=T.value,t(n.RENDER)}function d(){return FW.tidy(document.getElementById("tags").value.split(","))}function h(v){var T=v.target.value;if(T.length>0){var E=d();E.includes(T)||(a.tags+=(E.length>0?",":"")+T,t(n.RENDER))}v.target.value=""}function g(v){v.preventDefault();var T=v.currentTarget,E=T.name.value.trim();if(E.length<1)return alert("Page Title cannot be blank.");var W=T.slug.value.trim();if(W.length<2)return alert("Page Slug must be more than 1 character long.");var y=q({},r);y.name=E,y.slug=FW.slug(W),y.content=FW.img.fix(FW.img.abbr(e.edits.content),!0),y.tags=d().join(","),y.parent=T.parent.value,T.hide.checked?y.hide=!0:delete y.hide,a.useMd?y.editor="md":delete y.editor,t(n.UPDATE_PAGE,y)}function w(v){v.preventDefault(),confirm("You can't undo this after saving your wiki! Delete this page?")&&t(n.DELETE_PAGE,r.id)}};var St=(e,t,r)=>{var{edit:n,p:a,events:i}=e,{cd:l,md:o}=r;if(n)return At(e,t,r);for(var s=g=>a.pages.find(w=>w.id===(g==null?void 0:g.parent)),u=[],m=s(r);m;)u.unshift(m),m=s(m);var p=new Date(l),c=FW.date(p),d=new Date(o!=null?o:l),h=FW.date(d);return[html`<header> ${html.raw(u.map(g=>`<a href="?page=${g.slug}">${g.name}</a> /`).join(" "))} <div class="r ns"> <h1 class=c>${r.name}</h1> ${r.e?"":html`<div class="c tr" style=width:300px> <div class="tr ib at"> <time datetime=${d.toISOString()}>${h}</time> ${c!==h?html`<span class="db h"> Created: <time datetime=${p.toISOString()}>${c}</time> </span>`:""} </div> ${a.published?"":html`<button onclick=${()=>t(i.START_EDIT)}>Edit</button>`} </div>`} </div> </header>`,wt(r)]};var Ft=(e,t)=>{var r=FW.missing();return[html`<header> <h1>Missing Pages</h1> </header>`,html`<article> <p>Referenced but not created:</p> <ul> ${r.map(n=>html`<li>${n}</li>`)} </ul> </article>`]};var Lt=e=>{var r,n,a,i;e.root=location.pathname||"/",e.sb=!1,e.sbTab="Pages",e.sbx=new Set,e.recent=[],e.edit=!1,e.edits=null,e.keep=!1,e.src=!1,e.notis={},e.canPut=!1,e.events=U(q({},e.events),{HANDLE_404:"404",CREATE_PAGE:"cp",START_EDIT:"se",CANCEL_EDIT:"ce",UPDATE_PAGE:"up",DELETE_PAGE:"dp",COLLECT_TAGS:"ct",CHECK_CHANGED:"cc",SAVE_WIKI:"sw",NOTIFY:"n",REMOVE_NOTI:"rn",PUT_SAVE_WIKI:"psw",DETECT_PUT_SUPPORT:"dps"}),e.views={a:bt,s:yt,t:$t,p:St,m:Ft},e.c=(n=(r=document.querySelector("style#c"))==null?void 0:r.innerHTML)!=null?n:"",e.j=FW.parseJs((i=(a=document.querySelector("script#j"))==null?void 0:a.innerHTML)!=null?i:"");try{e.p=FW.json.decompress(JSON.parse(document.querySelector("script#p").innerHTML))}catch(l){e.p={name:"New Wiki",desc:"",pages:[],img:{}}}e.pg=FW.getPage();var t=e.p.pages.find(l=>{var o;return l.id===((o=e.recent[0])==null?void 0:o.p)});return e.useMd=(t==null?void 0:t.editor)==="md",e.t=[],e.prev=FW.hash.object(e.p),e.now=e.prev,e.changed=!1,e};function Ct(e){if(e.key==="Tab"){var t=this,r=T=>{var E=document.activeElement;E!==t&&t.focus();var W=T===""?document.execCommand("delete"):document.execCommand("insertText",!1,T);W||(t.setRangeText(T,t.selectionStart||0,t.selectionEnd||0,"end"),t.dispatchEvent(new InputEvent("input",{text:T,inputType:"insertText"})))},{selectionStart:n,selectionEnd:a,value:i}=t,l=i.lastIndexOf(`
`,n-1)+1;if(e.shiftKey){var o=i.lastIndexOf(`
`,a-1)+1,s=i.charAt(o)!=="	"?a:o+1,u=t.value.slice(l,s),m=u.replace(/(^|\n)(\t| {1,2})/g,"$1"),p=u.length-m.length;t.setSelectionRange(l,s),r(m);var c=/\t| {1,2}/.exec(i.slice(l,n)),d=c?c[0].length:0,h=n-d;t.setSelectionRange(n-d,Math.max(h,a-p))}else{var g,w=i.slice(n,a),v=(g=/\n/g.exec(w))===null||g===void 0?void 0:g.length;if(v>0){var u=t.value.slice(l,a-1),m=u.replace(/^|\n/g,"$&	"),p=m.length-u.length;t.setSelectionRange(l,a-1),r(m),t.setSelectionRange(n+1,a+p)}else r("	")}e.preventDefault()}}var Wt=(e,t)=>{var{root:r,views:n}=e,{ONLOAD:a,TITLE:i,RENDER:l,GO:o,HANDLE_404:s,CREATE_PAGE:u,START_EDIT:m,CANCEL_EDIT:p,UPDATE_PAGE:c,DELETE_PAGE:d,COLLECT_TAGS:h,CHECK_CHANGED:g,SAVE_WIKI:w,PUT_SAVE_WIKI:v,DETECT_PUT_SUPPORT:T,NOTIFY:E,REMOVE_NOTI:W}=e.events,y=(...f)=>t.emit(...f),V=()=>y(i,e.p.name+(e.pg?" | "+e.pg.name:"")),G=()=>setTimeout(()=>document.querySelectorAll("textarea:not(.notab)").forEach(f=>f.onkeydown=Ct),300),x=()=>e.edits&&!confirm("Lose unsaved changes?"),A=()=>{e.edit=!1,e.edits=null};return t.on(a,()=>{y(s),V(),e.recent=e.p.pages.map(f=>{var b;return{p:f.id,t:(b=f.md)!=null?b:f.cd}}).sort((f,b)=>f.t>b.t?-1:1),y(h),e.t.length?y(l):G(),y(T)}),t.on(l,G),t.on(s,()=>{var{page:f}=e.query;if((f==null?void 0:f.length)>1){var b=FW.slug(f),$=FW.find(b);if(!$&&!n[b]){var _=f.split("_").map(I=>I[0].toUpperCase()+I.substring(1)).join(" ");y(u,_,!1)}}else(f==null?void 0:f.length)>0&&!n[f]&&(e.pg={e:!0,name:"404",content:"<p>Page not found</p>"},y(l))}),t.on(o,()=>{var I;var{p:f,pg:b}=e,$=(I=e.query.page)!=null?I:null,_=(b==null?void 0:b.slug)===$||!$&&(b==null?void 0:b.id)===f.home;if(!_&&x())return history.go(-1);_||(A(),e.pg=FW.getPage(),y(s),V())}),t.on(u,(f,b=!0)=>{if(!(f.length<2)&&!x()){A();var{p:$,query:_}=e,I=()=>{for(var Z=[],He=0;He<9;He++){var $r=Math.round(Math.random()*94)+32;Z.push(String.fromCharCode($r))}return Z.join("")},H;do H=I();while($.pages.findIndex(Z=>Z.id===H)>=0);var Q=0,yr=FW.slug(f),le;do le=yr+(Q>0?"_"+Q:""),Q++;while($.pages.some(Z=>Z.slug===le));var ce={id:H,name:f,slug:le,cd:Date.now()};e.showNewPageField=!1,b?(e.p.pages.push(ce),e.recent.unshift({p:ce.id,t:ce.cd}),y(g),y(o,r+"?page="+le,_.page!==le?"replace":"push")):e.pg=ce,y(m)}}),t.on(m,()=>{var $,_,I,H,Q;var{pg:f}=e;e.edit=!0;var b={name:($=f.name)!=null?$:"",slug:(_=f.slug)!=null?_:"",content:FW.img.fix((I=f.content)!=null?I:""),tags:(H=f.tags)!=null?H:"",parent:(Q=f.parent)!=null?Q:"",hide:!!f.hide};b.useMd=f.editor==="md"||!b.content&&e.useMd,e.edits=b,e.src=!1,y(l)}),t.on(p,()=>{x()||(A(),y(l))}),t.on(c,f=>{var{p:b}=e;if(b.pages.some(_=>_.slug===f.slug&&_.id!==f.id))return alert(`A page with the slug "${f.slug}" already exists!`);var $=b.pages.findIndex(_=>_.id===f.id);Object.keys(f).forEach(_=>{f[_].length<1&&delete f[_]}),f.md=Date.now(),$>-1?b.pages[$]=f:b.pages.push(f),e.recent=[{p:f.id,t:f.md},...e.recent.filter(_=>_.p!==f.id)],A(),e.useMd=f.editor==="md",y(h),e.pg=FW.getPage(),y(g)}),t.on(d,f=>{e.p.pages=e.p.pages.map(b=>(b.parent===f&&delete b.parent,b)).filter(b=>b.id!==f),e.recent=e.recent.filter(b=>b.p!==f),A(),y(h),delete e.pg,y(o,r),y(g)}),t.on(h,()=>{e.t=FW.tidy(e.p.pages.reduce((f,b)=>{var $,_;return[...f,...(_=($=b.tags)==null?void 0:$.split(","))!=null?_:[]]},[]))}),t.on(g,f=>{e.now=FW.hash.object(e.p),e.changed=e.prev!==e.now,y(l,f)}),t.on(E,(f,b=5e3,$="background:#ddd; color:#000")=>{var _=Date.now(),I=()=>y(W,_),H=html`<div class=noti style=${$} id=${_} onclick=${()=>I()} title="Click to close"> <span role=alert>${f}</span><span class=fr>×</span> </div>`;e.notis[_]=H,b>0&&setTimeout(I,b),document.querySelector(".notis").appendChild(H)}),t.on(W,f=>{var b=e.notis[f];b==null||b.parentNode.removeChild(b),delete e.notis[f]}),t.on(w,()=>{var f=FW.gen(e),{p:b}=e,$=document.createElement("a");$.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(f));var _=/\/$/.test(r)?"index.html":decodeURI(r.substring(r.lastIndexOf("/")+1));$.setAttribute("download",_),document.body.appendChild($),$.click(),document.body.removeChild($),e.canPut||(e.prev=FW.hash.object(b),y(g))}),t.on(v,()=>{var f=FW.gen(e),{p:b}=e;fetch(r,{method:"PUT",body:f}).then($=>$.text().then(_=>({ok:$.ok,status:$.status,text:_}))).then($=>{if(!$.ok)throw $.text?$.text:`Status ${$.status}.`;y(E,"Saved"),e.prev=FW.hash.object(b),y(g)}).catch($=>{y(E,`Save failed! ${$}`,9999,"background:#e88")})}),t.on(T,()=>{!location.protocol.startsWith("http")||e.canPut||fetch(r,{method:"OPTIONS"}).then(f=>{f.ok&&f.headers.get("dav")&&(e.canPut=!0,y(l))}).catch(f=>{})}),t};var be=(e,t)=>{var G,x;var{root:r,pg:n,p:a,t:i,recent:l,events:o,query:s,changed:u,sb:m,sbTab:p,views:c,notis:d}=e,h=!a.published||s.page==="s",g=a.pages.filter(A=>!A.parent),w=l.map(A=>a.pages.find(f=>f.id===A.p)),v=n?c.p(e,t,n):((x=c[(G=s.page)!=null?G:"a"])!=null?x:()=>{})(e,t);s.tag&&(v=c.t(e,t));var T=[u?html`<div>Wiki has changed!</div>`:""];if(e.canPut){var E=location.origin+r;T.push(html`<div> <button class=${u?"chg":""} title="Save wiki to ${E}" onclick=${()=>t(o.PUT_SAVE_WIKI)}> Save Wiki to Server </button> </div>`)}return T.push(html`<div> <button class=${!e.canPut&&u?"chg":""} title="Download wiki in its current state" onclick=${()=>t(o.SAVE_WIKI)}> ${e.canPut?"Save Wiki Locally":"Save Wiki"} </button> </div>`),html`<body> <main> <div class=sb> <span class=db><a href=? class=t>${a.name}</a></span> ${a.desc?html`<p class=pb>${a.desc}</p>`:""} ${h?T:""} <button class=sbt onclick=${()=>y()}>${m?"Hide Menu":"Show Menu"}</button> <nav class=${m?"":"n"}> ${h?[html`<p><a href="?page=s">Wiki Settings</a></p>`,html`<details class=pb ontoggle=${()=>document.getElementById("np").focus()}> <summary class=np>New Page</summary> <form onsubmit=${W}> <label class=sr for=np>New Page Title</label> <input id=np placeholder="New Page Title" autocomplete=off> <button type=submit>Create</button> </form> </details>`]:""} <div class=tabs> <button class=${p==="Pages"&&"a"} onclick=${V}>Pages</button> ${i.length>0?html`<button class=${p==="Tags"&&"a"} onclick=${V}>Tags</button>`:""} <button class=${p==="Recent"&&"a"} onclick=${V}>Recent</button> </div> ${p==="Pages"?html`<ul> ${g.map(A=>FW.getChildList(A,!0))} <li><a href="?page=a">All Pages</a></li> ${FW.missing().length>0?html`<li><a href="?page=m">Missing Pages</a></li>`:""} </ul>`:""} ${p==="Tags"?html`<ul> ${i.map(A=>html`<li><a href="?tag=${A}">${A}</a></li>`)} </ul>`:""} ${p==="Recent"?html`<ul style=padding:0> ${w.map(A=>{var f;return html`<li> <a href="?page=${A.slug}">${A.name}</a> <p class=h style=margin:0>${FW.date(new Date((f=A.md)!=null?f:A.cd))}</p> </li>`})} </ul>`:""} </nav> </div> <section>${v}</section> </main> <footer> <span class=fr>Powered by <a href=https://feather.wiki title="Version: 1.8.1 (Meadowlark)" target=_blank rel="noopener noreferrer">Feather Wiki</a></span> </footer> <div class=notis> ${Object.values(d)} </div> </body>`;function W(A){A.preventDefault();var f=A.currentTarget.np.value.trim();if(f.length<2)return alert("Enter more than 1 character to create a new page.");t(o.CREATE_PAGE,f.trim())}function y(){e.sb=!e.sb,t(o.RENDER)}function V(A){e.sbTab=A.target.innerText,t(o.RENDER)}};function kt(e,t=()=>{}){var r=new FileReader;r.onload=n=>_e(this,null,function*(){var a=n.target.result,i=ke(a,"script","p type=application/json");if(!i.length||i[0]!=="{")return alert("Could not find Feather Wiki data.");var l=FW.json.decompress(JSON.parse(i));l.img=yield sn(l.img),t([l,ke(a,"style","c"),FW.parseJs(ke(a,"script","j"))])}),r.onerror=function(n){t(null)},r.readAsText(e)}function ke(e,t,r){var n=`\\s<${t} id=${r}>`,a=e.match(new RegExp(n+`.+?(?=</${t}>)`,"s"));return(a!=null?a:[]).length?a[0].replace(n.replace("\\s",""),"").trim():""}function sn(e){return _e(this,null,function*(){var t=Object.keys(e);return t.length&&!e[t[0]].img&&(yield Promise.all(t.map(r=>new Promise(n=>{var a=new Image;a.src=e[r],a.onload=()=>{e[r]={img:e[r],alt:"image",size:[a.width,a.height]},n()}})))),e})}function It(e){var{c:t,p:r,j:n}=e;return`<!doctype html> <html lang=en-US> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>${r.name}</title> ${r.desc?`<meta name="description" content="${r.desc.replace(/"/g,'\\"')}">`:""} <meta name=application-name content="Feather Wiki"> <meta name=version content=1.8.1> <style id=s>${document.getElementById("s").innerHTML}</style> ${t?`<style id=c>${t}</style>`:""} <script id=p type=application/json>${JSON.stringify(FW.json.compress(r))}<\/script> <script id=a>${document.getElementById("a").innerHTML}<\/script> ${FW.inject.esc(r.head,!0)} </head> <body> ${a()} <footer><a href=https://src.feather.wiki/#browser-compatibility>JavaScript is required</a></footer> ${n?`<script id=j>FW.ready(()=>{/**/${n}/**/});<\/script>`:""} </body> </html>`;function a(){var l=U(q({},e),{edit:!1,sb:!0,sbx:new Set,pg:void 0,query:{page:"a"},p:U(q({},r),{published:!0})}),o=be(l);if(o.querySelector(".sb .tabs").remove(),r.static){var s=o.querySelector("main>section");s.parentElement.replaceChild(i(l),s),o.querySelector(".sb>nav>ul>li:last-child,.sbt").remove()}return o.querySelectorAll("a").forEach(u=>{u.classList.remove("a"),u.href=u.href.includes("#")?u.href.replace(/.+(#.+)$/,"$1"):u.href.includes("page=")?u.href.replace(/.+(page=.+)(\&.+)*?$/,r.static?"#$1":"?$1"):u.href.replace(location.toString().split("?")[0],"")}),o.querySelector("main").outerHTML}function i(l){return html`<section> ${r.pages.map(o=>{var s=e.views.p(l,"",o);return s[0].querySelector("h1").id="page="+o.slug,html`<article> ${s[0]} <div class=uc>${html.raw(s[1][1].innerHTML)}</div> </article>`})} </section>`}}var Ie={};B(Ie,{abbr:()=>fn,fix:()=>cn,put:()=>un,resizeImage:()=>Ot,upload:()=>on});function on(e,t=()=>{}){confirm("Inserting images increases your wiki's file size. Continue?")&&FW.upload("image/*",r=>{Ot(r,(n,a,i)=>{if(n){var l=FW.hash.string(n);e.p.img[l.toString()]={alt:prompt("Alt text:",r.name),size:[a,i],img:n},t({img:n,id:l})}})})}function un(e,t,r=()=>{}){e.preventDefault(),document.getElementById("g").close(),r(t)}function fn(e){return e.replace(/(?:<img src=")[^"]+#([-\d]+)(?=")/g,'<img src="img:$1:img')}function cn(e,t){return t?e.replace(/<img /g,"<im "):e.replace(/<im /g,"<img ")}function Ot(e,t=()=>{}){var r=new FileReader;r.onload=n=>{var a=new Image;a.src=n.target.result,a.onload=()=>{var i=document.createElement("canvas"),l=a.width,o=a.height,s=prompt("Max width pixels:","400");s=s!=null&&s.length?parseInt(s):400;var u=prompt("Max height pixels:","350");u=u!=null&&u.length?parseInt(u):350,l>o?l>s&&(o*=s/l,l=s):o>u&&(l*=u/o,o=u),i.width=l,i.height=o;var m=i.getContext("2d");m.drawImage(a,0,0,l,o),t(i.toDataURL(e.type),l,o)}},r.onerror=n=>{t(null)},r.readAsDataURL(e)}var Oe={};B(Oe,{object:()=>dn,string:()=>Rt});function Rt(e){var t=0,r,n;if(e.length===0)return t;for(r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t}function dn(e){return Rt(JSON.stringify(e))}var Re={};B(Re,{esc:()=>vn,hLink:()=>gn,img:()=>hn,out:()=>mn,pg:()=>pn});function pn(e){var r;var t=e!=null?e:null;return t&&((r=e==null?void 0:e.match(/\[\[.+?(?=\]\])/g))!=null?r:[]).forEach(n=>{var s;var a=n.replace("[[","").split("|"),i=a[1]?a[0]:a[0].split("#")[0],l=((s=a[1])!=null?s:a[0]).trim().split("#");a[1]||(l[0]=FW.slug(l[0]));var o=FW.state.p.pages.some(u=>u.slug===l[0])||typeof FW.state.views[l[0]]!="undefined";t=t.replace(`${n}]]`,`<a internal href="?page=${l.join("#")}"${o?"":" class=e"}>${i}</a>`)}),t}function hn(e,t=!1){var n;var r=e!=null?e:null;return r&&((n=e==null?void 0:e.match(/img:.+?(?=:img)/g))!=null?n:[]).forEach(a=>{id=a.replace("img:","");var i=FW.state.p.img[id];typeof i!="undefined"&&(r=r.replace(`${a}:img`,i.img+(t?`#${id}`:"")+`" alt="${i.alt}`))}),r}function mn(e){var r;var t=e!=null?e:null;return t&&((r=e==null?void 0:e.match(/<a href="[^"]+">/gi))!=null?r:[]).forEach(n=>{t=t.replace(n,n.replace(">",'target="_blank" rel="noopener noreferrer">'))}),t}function gn(e){var r;var t=e!=null?e:null;return t&&((r=e==null?void 0:e.match(/<h\d>.+?<\/h\d>/gi))!=null?r:[]).forEach(n=>{var a=n.match(/<h(\d)>(.+)<\/h\d>/i),i=FW.slug(a[2]);t=t.replace(n,`<h${a[1]} id=${i}>${a[2]} <a class=l href=#${i}>#</a></h${a[1]}>`)}),t}function vn(e,t=!1){var r;return(r=t?e==null?void 0:e.replace(/&[lg]t;/g,n=>{var a;return(a={"&lt;":"<","&gt;":">"}[n])!=null?a:n}):e==null?void 0:e.replace(/[<>]/g,n=>{var a;return(a={"<":"&lt;",">":"&gt;"}[n])!=null?a:n}))!=null?r:""}var Pe={};B(Pe,{compress:()=>qt,decompress:()=>Pt});var oe=-1;function qt(e,t,r){typeof t=="boolean"?(r=t,t=void 0):r=typeof r!="undefined"?r:!1,typeof t=="undefined"&&(oe=-1);var n=t||[],a;return qe(e)?(wn(e,n,r),a=e):a=En(e,n,r),a}function Pt(e){var t,r=JSON.parse(JSON.stringify(e));return qe(r)?Tn(r):t=xn(r),t?JSON.parse(t):r}function Dt(e,t){var r,n=e.length;for(r=0;r<n;r++)if(e[r][1]===t)return!0;return!1}function Mt(e){var t,r=e.length,n=[];for(t=0;t<r;t++)Dt(n,e[t][1])||n.push(e[t]);return n}function bn(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function yn(e){return(e==null?void 0:e.constructor)===Object}function qe(e){return Array.isArray(e)}function $n(e){return e.reduce((t,r)=>(t[r[0]]=r[1],t),{})}function Vt(e,t,r=0){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",a=[],i=e;for(t=t||n.length;i>=t;)a.push(n.charCodeAt(i%t+r)),i=Math.floor(i/t-1);return a.push(n.charCodeAt(i+r)),a.reverse()}function Ht(e){return String.fromCharCode.apply(String,e)}function Ut(e,t){var r,n,a;for(n in e)typeof e[n]!="undefined"&&(a=e[n],(yn(a)||qe(a))&&(t=t.concat(Mt(Ut(a,t)))),isNaN(Number(n))&&(Dt(t,n)||(oe+=1,r=[Ht(Vt(oe)),n],t.push(r))));return t}function jt(e){var t,r=e.length,n={};for(t=0;t<r;t++){var a=e[t][0];n[a]=t}for(t=0;t<r;t++){var i=e[t][1];if(typeof n[i]!="undefined"){var l=n[i];return oe+=1,e[l][0]=Ht(Vt(oe)),n[l]=e[l][0],delete n[i],jt(e)}}return e}function wn(e,t,r){var n,a;for(n=0,a=e.length;n<a;n++)e[n]=qt(e[n],t,r)}function En(e,t,r){var n,a,i,l,o;for(t=Mt(Ut(e,t)),r===!0&&(t=jt(t)),a=JSON.stringify(e),i=t.length,l=0;l<i;l++)n=t[l],a=a.replace(new RegExp('(?:"'+bn(n[1])+'"):',"g"),'"'+n[0]+'":');return o=JSON.parse(a),o._=$n(t),o}function Tn(e){var t,r;for(t=0,r=e.length;t<r;t++)e[t]=Pt(e[t])}function xn(e){var t,r,n;t=JSON.parse(JSON.stringify(e._)),delete e._,r=JSON.stringify(e);for(n in t)typeof t[n]!="undefined"&&(r=r.replace(new RegExp('(?:"'+n+'"):',"g"),'"'+t[n]+'":'));return r}window.html=ur();html.raw=cr();window.ed=(mr(),pe(hr)).default;window.md=(br(),pe(vr)).default;window.FW=z();FW.slug=e=>e==null?void 0:e.toLowerCase().replace(/\s/g,"_").replace(/[\x00-\x2F\x3A-\x40[\\\]^`\x7B-\x7F]/g,"-");FW.date=e=>e.toLocaleString();FW.tidy=e=>e.map(t=>t.trim()).filter((t,r,n)=>t.length&&n.indexOf(t)===r).sort();FW.xtr=kt;FW.gen=It;FW.img=Ie;FW.hash=Oe;FW.inject=Re;FW.json=Pe;FW.upload=(e,t)=>{var r=html`<input type=file accept=${e} onchange=${n=>{var a=n.target.files;a.length>0&&t(a[0])}}>`;document.body.appendChild(r),r.click(),document.body.removeChild(r)};FW.find=(e,t="slug")=>FW.state.p.pages.find(r=>r[t]===e);FW.getPage=()=>{var{query:e,p:t}=FW.state;return!e.page&&t.home?FW.find(t.home,"id"):FW.find(e.page)};FW.getChildren=(e,t)=>FW.state.p.pages.filter(r=>r.parent===(e==null?void 0:e.id)&&(!t||!r.hide));FW.getChildList=(e,t)=>{var m;if(t&&e.hide)return"";var{getChildren:r,getChildList:n}=FW,a=r(e,t),i=(m=FW.state.pg)==null?void 0:m.slug,l=i===e.slug,o=p=>{var c;return l||FW.state.sbx.has(e.id)||((c=p.find(d=>d.slug===i||o(r(d,t))))!=null?c:!1)},s=[html`<a href="?page=${e.slug}" class=${l?"a":""}>${e.name}</a>`,a.length>0?html`<ul>${a.map(p=>n(p,t))}</ul>`:""],u=t&&s[1]?html`<details open=${o(a)} onclick=${p=>FW.state.sbx.add(e.id)} ontoggle=${p=>{p.target.open||FW.state.sbx.delete(e.id)}}> <summary>${s[0]}</summary> ${s[1]} </details>`:s;return html`<li> ${u} </li>`};FW.missing=()=>FW.state.p.pages.reduce((e,t)=>{var r=document.createElement("div");r.innerHTML=FW.inject.pg(t.content);var n=[...r.getElementsByClassName("e")].filter(a=>e.every(i=>i.href!==a.href));return[...e,...n]},[]).sort();FW.parseJs=e=>e.replace(new RegExp("^FW\\.ready\\(\\(\\)=>\\{\\/\\*\\*\\/(.*)\\/\\*\\*\\/\\}\\);$","gs"),"$1");FW.ready(()=>{Lt(FW.state),Wt(FW.state,FW.emitter)});FW._view=be;FW.mount("body");window.addEventListener("beforeunload",e=>{if(FW.state.changed)return e.preventDefault(),e.returnValue="Lose unsaved changes?"},{capture:!0});})(); </script>  </head> <body> <main> <div class="sb"> <span class="db"><a href="?" class="t">Feather Wiki</a></span> <p class="pb">A lightweight personal wiki</p> <button class="sbt">Hide Menu</button> <nav class="">  <ul> <li> <a href="?page=undefined" class="">Quick Notes</a></li><li> <details open="open"> <summary><a href="?page=undefined" class="">My Projects</a></summary> <ul><li> <a href="?page=undefined" class="">Example Project</a></li></ul></details></li><li> <a href="?page=undefined" class="">Markdown Guide</a></li><li> <a href="?page=undefined" class="">Features</a></li><li> <a href="?page=undefined" class="">Welcome</a></li><li> <a href="?page=african-elephant" class="">African Elephant</a></li><li> <a href="?page=great-white-shark" class="">Great White Shark</a></li><li> <a href="?page=emperor-penguin" class="">Emperor Penguin</a></li><li> <a href="?page=giant-panda" class="">Giant Panda</a></li><li> <a href="?page=bald-eagle" class="">Bald Eagle</a></li> <li><a href="?page=a">All Pages</a></li></ul></nav></div> <section><header> <h1>All Pages</h1></header><ul> <li> <a href="?page=undefined" class="">Quick Notes</a></li><li> <a href="?page=undefined" class="">My Projects</a><ul><li> <a href="?page=undefined" class="">Example Project</a></li></ul></li><li> <a href="?page=undefined" class="">Markdown Guide</a></li><li> <a href="?page=undefined" class="">Features</a></li><li> <a href="?page=undefined" class="">Welcome</a></li><li> <a href="?page=african-elephant" class="">African Elephant</a></li><li> <a href="?page=great-white-shark" class="">Great White Shark</a></li><li> <a href="?page=emperor-penguin" class="">Emperor Penguin</a></li><li> <a href="?page=giant-panda" class="">Giant Panda</a></li><li> <a href="?page=bald-eagle" class="">Bald Eagle</a></li></ul></section></main> <footer><a href=https://src.feather.wiki/#browser-compatibility>JavaScript is required</a></footer> <script id=j>FW.ready(()=>{/**/(function() {
  const state = FW.state;
  const emitter = FW.emitter;
  
  emitter.on('render', function() {
    if (state.edit || !state.pg || state.pg.e) return;
    if (document.querySelector('#factCheckBtn')) return;
    
    const article = document.querySelector('article.uc');
    if (!article) return;
    
    const button = document.createElement('button');
    button.id = 'factCheckBtn';
    button.textContent = '🔍 Fact Check This Page';
    button.style.cssText = 'margin:1rem 0;padding:0.5rem 1rem;background:#007bff;color:white;border:none;border-radius:4px;cursor:pointer;';
    button.onclick = runFactCheck;
    
    article.parentElement.insertBefore(button, article);
    
    const resultsDiv = document.createElement('div');
    resultsDiv.id = 'factCheckResults';
    resultsDiv.style.cssText = 'display:none;margin:1rem 0;padding:1rem;border:2px solid #007bff;border-radius:4px;background:#f8f9fa;';
    resultsDiv.innerHTML = '<h3 style="margin-top:0;">Fact Check Results</h3><div id="factCheckContent"></div>';
    article.parentElement.insertBefore(resultsDiv, article);
  });

  async function runFactCheck() {
    const button = document.querySelector('#factCheckBtn');
    const resultsPanel = document.querySelector('#factCheckResults');
    const resultsContent = document.querySelector('#factCheckContent');
    
    if (!button || !resultsPanel || !resultsContent) return;
    
    button.textContent = '⏳ Checking facts...';
    button.disabled = true;
    resultsPanel.style.display = 'block';
    resultsContent.innerHTML = '<p>Analyzing content for factual claims...</p>';
    
    try {
      const content = state.pg.content || '';
      let textContent = content;
      
      if (state.pg.editor === 'md' && typeof md !== 'undefined') {
        textContent = md(content);
      }
      
      const temp = document.createElement('div');
      temp.innerHTML = textContent;
      textContent = temp.textContent || temp.innerText || '';
      
      const claims = extractClaims(textContent);
      
      if (claims.length === 0) {
        resultsContent.innerHTML = '<p>No specific factual claims detected in this page.</p>';
        button.textContent = '✅ Fact Check Complete';
        button.disabled = false;
        return;
      }
      
      resultsContent.innerHTML = '<p>Found ' + claims.length + ' claims. Checking against Wikipedia...</p>';
      
      const results = await checkWithWikipedia(claims);
      displayResults(results, resultsContent);
      
      button.textContent = '🔍 Fact Check This Page';
      button.disabled = false;
    } catch (error) {
      console.error('Fact check error:', error);
      resultsContent.innerHTML = '<p style="color:red;">Error: ' + error.message + '</p>';
      button.textContent = '❌ Error - Try Again';
      button.disabled = false;
    }
  }

  function extractClaims(text) {
    const claims = [];
    const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
    
    sentences.forEach(function(sentence, index) {
      const trimmed = sentence.trim();
      if (trimmed.length < 10) return;
      
      let score = 0;
      if (/\d+/.test(trimmed)) score++;
      if (/\d{4}|January|February|March|April|May|June|July|August|September|October|November|December/i.test(trimmed)) score++;
      if (/\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*\b/.test(trimmed)) score++;
      if (/\b\d+%|\$\d+|approximately|about|nearly|over\s+\d+/i.test(trimmed)) score += 2;
      if (/\b(is|are|was|were|has|have|had|will|can|cannot|must)\b/i.test(trimmed)) score++;
      
      if (score >= 2) {
        claims.push({
          text: trimmed,
          index: index,
          score: score
        });
      }
    });
    
    return claims;
  }

  async function checkWithWikipedia(claims) {
    const results = [];
    
    for (let i = 0; i < claims.length; i++) {
      const claim = claims[i];
      try {
        const keyTerms = extractKeyTerms(claim.text);
        const searchQuery = keyTerms.join(' ');
        
        const searchUrl = 'https://en.wikipedia.org/w/api.php?' +
          'action=query&format=json&list=search&' +
          'srsearch=' + encodeURIComponent(searchQuery) +
          '&srlimit=3&origin=*';
        
        const searchResponse = await fetch(searchUrl);
        const searchData = await searchResponse.json();
        
        if (!searchData.query || !searchData.query.search || searchData.query.search.length === 0) {
          results.push({
            claim: claim.text,
            status: 'review',
            explanation: 'No Wikipedia articles found. May need manual verification.',
            sources: []
          });
          continue;
        }
        
        const topResult = searchData.query.search[0];
        const pageTitle = topResult.title;
        
        const extractUrl = 'https://en.wikipedia.org/w/api.php?' +
          'action=query&format=json&' +
          'titles=' + encodeURIComponent(pageTitle) +
          '&prop=extracts|info&exintro=1&explaintext=1&inprop=url&origin=*';
        
        const extractResponse = await fetch(extractUrl);
        const extractData = await extractResponse.json();
        
        const pages = extractData.query.pages;
        const pageId = Object.keys(pages)[0];
        const page = pages[pageId];
        const extract = page.extract || '';
        
        const claimNumbers = claim.text.match(/\d+/g) || [];
        const extractNumbers = extract.match(/\d+/g) || [];
        const hasMatchingNumbers = claimNumbers.some(function(num) {
          return extractNumbers.indexOf(num) !== -1;
        });
        
        const relevance = calculateRelevance(claim.text, extract);
        const status = (relevance > 0.5 || hasMatchingNumbers) ? 'verified' : 'questionable';
        
        results.push({
          claim: claim.text,
          status: status,
          explanation: 'Wikipedia article: "' + pageTitle + '". ' + extract.substring(0, 200) + '...',
          sources: [{
            title: pageTitle,
            url: page.fullurl || 'https://en.wikipedia.org/wiki/' + encodeURIComponent(pageTitle),
            snippet: extract.substring(0, 300)
          }]
        });
        
      } catch (error) {
        console.error('Wikipedia check error:', error);
        results.push({
          claim: claim.text,
          status: 'error',
          explanation: 'Error checking: ' + error.message,
          sources: []
        });
      }
    }
    
    return results;
  }

  function extractKeyTerms(text) {
    const words = text.split(/\s+/);
    const keyTerms = [];
    
    for (let i = 0; i < words.length; i++) {
      if (/^[A-Z][a-z]+/.test(words[i])) {
        keyTerms.push(words[i]);
      }
    }
    
    const numbers = text.match(/\d+(?:\.\d+)?%?/g) || [];
    keyTerms.push.apply(keyTerms, numbers);
    
    const unique = [];
    for (let i = 0; i < keyTerms.length; i++) {
      if (unique.indexOf(keyTerms[i]) === -1) {
        unique.push(keyTerms[i]);
      }
    }
    
    return unique.slice(0, 5);
  }

  function calculateRelevance(claim, wikiText) {
    const claimWords = claim.toLowerCase().split(/\s+/).filter(function(w) { return w.length > 3; });
    const wikiWords = wikiText.toLowerCase().split(/\s+/);
    
    let matches = 0;
    for (let i = 0; i < claimWords.length; i++) {
      for (let j = 0; j < wikiWords.length; j++) {
        if (wikiWords[j].indexOf(claimWords[i]) !== -1 || claimWords[i].indexOf(wikiWords[j]) !== -1) {
          matches++;
          break;
        }
      }
    }
    
    return matches / Math.max(claimWords.length, 1);
  }

  function displayResults(results, container) {
    if (!results || results.length === 0) {
      container.innerHTML = '<p>No fact-checkable claims found.</p>';
      return;
    }
    
    let html = '<p><strong>Found ' + results.length + ' factual claim(s):</strong></p>';
    
    for (let i = 0; i < results.length; i++) {
      const result = results[i];
      const statusColor = result.status === 'verified' ? '#d4edda' : 
                         result.status === 'questionable' ? '#f8d7da' : '#fff3cd';
      const statusIcon = result.status === 'verified' ? '✅' : 
                        result.status === 'questionable' ? '⚠️' : '🔍';
      const borderColor = result.status === 'verified' ? '#28a745' : 
                         result.status === 'questionable' ? '#dc3545' : '#ffc107';
      
      html += '<div style="margin:1rem 0;padding:0.75rem;background:' + statusColor + 
              ';border-radius:4px;border-left:4px solid ' + borderColor + ';">';
      html += '<p style="margin:0 0 0.5rem 0;"><strong>' + statusIcon + ' Claim ' + (i + 1) + ':</strong></p>';
      html += '<p style="margin:0 0 0.5rem 0;font-style:italic;">"' + result.claim + '"</p>';
      
      if (result.explanation) {
        html += '<p style="margin:0.5rem 0;font-size:0.9em;"><strong>Analysis:</strong> ' + result.explanation + '</p>';
      }
      
      if (result.sources && result.sources.length > 0) {
        html += '<div style="margin:0.5rem 0;font-size:0.9em;"><strong>Sources:</strong><ul style="margin:0.25rem 0;padding-left:1.5rem;">';
        for (let j = 0; j < result.sources.length; j++) {
          const source = result.sources[j];
          html += '<li><a href="' + source.url + '" target="_blank" rel="noopener noreferrer">' + source.title + '</a></li>';
        }
        html += '</ul></div>';
      }
      
      html += '<p style="margin:0.5rem 0 0 0;"><a href="https://www.google.com/search?q=' + 
              encodeURIComponent(result.claim) + '" target="_blank" rel="noopener noreferrer" style="font-size:0.9em;">🔗 Search Google</a></p>';
      html += '</div>';
    }
    
    html += '<div style="margin-top:1rem;padding:0.75rem;background:#e7f3ff;border-radius:4px;">';
    html += '<p style="margin:0;font-size:0.9em;"><strong>💡 Note:</strong> This fact-checker uses Wikipedia API to verify claims. ';
    html += 'Green = likely accurate, Yellow = needs review, Red = questionable. Always verify important facts!</p></div>';
    
    container.innerHTML = html;
  }
})();

/**/});</script> </body> </html>